(window.webpackJsonp_wixSantaEditor=window.webpackJsonp_wixSantaEditor||[]).push([[3],{1577:function(e,t,i){"use strict";i.r(t),i.d(t,"dbEditor",(function(){return ne})),i.d(t,"DbEditorApi",(function(){return Ce})),i.d(t,"panels",(function(){return s})),i.d(t,"BIService",(function(){return Pe}));var s={};i.r(s),i.d(s,"deleteItemsConfirmationPanel",(function(){return Ne})),i.d(s,"saveFailedMessagePanel",(function(){return De})),i.d(s,"loadFailedMessagePanel",(function(){return Te}));var a=i(12),l=i.n(a),n=i(3),r=i.n(n),d=i(1),o=i.n(d),c=i(41),m=i(0),p=i.n(m),h=i(2),u=i(6),_={contextTypes:{dbEditorApi:r.a.object.isRequired},getDbEditorApi(){return this.context.dbEditorApi}},b=i(9),g=i(4),I=i.n(g);var v=l()({displayName:"itemDetails",mixins:[_],propTypes:{item:r.a.object.isRequired,showImage:r.a.bool,visibleFields:r.a.arrayOf(r.a.string)},getDefaultProps:()=>({showImage:!0}),getImageDef(){const e=(t=this.props.item,i=this.props.visibleFields,o.a.find(t,(function(e,t){return"wix:Image"===e._type&&o.a.includes(i,t)})));var t,i;const s=!!e,a=s&&!o.a.isEmpty(e.src);return{imageVisible:s,imageValid:a,props:a?function(e,t){const i={uri:e.src,width:e.width,height:e.height},s=h.imageTransform.getData(h.imageTransform.fittingTypes.SCALE_TO_FILL,{width:i.width,height:i.height,id:i.uri},{width:43,height:43,alignment:h.imageTransform.alignTypes.CENTER,htmlTag:"img"});return{src:"".concat(t.getServiceTopology().staticMediaUrl,"/").concat(s.uri),style:s.css.img}}(e,this.getDbEditorApi()):null}},editItem(){this.getDbEditorApi().setCurrentItem(this.props.item._iid,"hover_item")},render(){return p.a.createElement("div",{onClick:this.editItem,className:"item-details"},this.props.showImage&&this.getImageDef().imageVisible?(()=>{const e=this.getImageDef();return p.a.createElement("span",{key:"item-img-container",className:Object(h.cx)({"item-thumb-img":!0,noImage:!e.imageValid})},e.imageValid?p.a.createElement("img",Object.assign({key:"item-img-thumb"},e.props)):null,e.imageValid?null:p.a.createElement(b.symbol,{name:"camera",key:"item-img-symbol"}))})():null,p.a.createElement("span",{className:"item-title"},o.a.unescape(this.props.item.title)||"(Untitled Item)"))}}),E=l()({displayName:"itemActionMenu",mixins:[h.translationMixin,_],propTypes:{item:r.a.object.isRequired,isHidden:r.a.bool.isRequired},editItem(){const e=this.props.item._iid;this.getDbEditorApi().setCurrentItem(e,"hover_item")},duplicateItem(){this.getDbEditorApi().duplicateItems([this.props.item],"hover_item")},deleteItem(){this.getDbEditorApi().deleteItems([this.props.item],"hover_item")},showItem(){this.getDbEditorApi().showItems([this.props.item],"hover_item")},hideItem(){this.getDbEditorApi().hideItems([this.props.item],"hover_item")},render(){return p.a.createElement("div",{onClick:e=>{e.stopPropagation()},className:"item-action-menu"},p.a.createElement("div",{className:"action-buttons-container"},p.a.createElement(b.button,{label:"list_dbe_hover_item_duplicate_tooltip",icon:"duplicate",onClick:this.duplicateItem,className:"duplicate-item-button"}),p.a.createElement(b.button,{label:"list_dbe_hover_item_delete_tooltip",icon:"delete",onClick:this.deleteItem,className:"delete-item-button"}),this.props.isHidden?p.a.createElement(b.button,{key:"hoverItemShowBtn",label:"list_dbe_hover_item_show",icon:"quickActionsShow",onClick:this.showItem,className:"show-item-button"}):null,this.props.isHidden?null:p.a.createElement(b.button,{key:"hoverItemHideBtn",label:"list_dbe_hover_item_hide",icon:"quickActionsHide",onClick:this.hideItem,className:"hide-item-button"}),p.a.createElement(b.button,{label:"list_dbe_hover_item_edit",icon:"pencil",onClick:this.editItem,className:"edit-item-button"})))}}),f=l()({displayName:"itemListRow",mixins:[h.propTypesFilterMixin],propTypes:{item:r.a.object.isRequired,isOpened:r.a.bool.isRequired,isSelected:r.a.bool.isRequired,visibleFields:r.a.arrayOf(r.a.string),onSelect:r.a.func.isRequired,onStartDrag:r.a.func},render(){var e;return p.a.createElement("div",Object.assign({},this.filteredProps(),{className:Object(h.cx)("item-list-row",null===(e=this.filteredProps())||void 0===e?void 0:e.className)}),this.props.isOpened?null:p.a.createElement("span",{key:"drag-handle",onMouseDown:this.props.onStartDrag,className:"drag-handle-container"},p.a.createElement(b.symbol,{name:"dragHandle",className:"symbol-dragHandle"})),this.props.isOpened?null:p.a.createElement(I.a.Checkbox,{key:"item-checkbox",labelAfterSymbol:!0,value:this.props.isSelected,onChange:this.props.onSelect}),p.a.createElement(v,{item:this.props.item,showImage:!this.props.isOpened,visibleFields:this.props.visibleFields,isHidden:this.props.isHidden,className:Object(h.cx)({draggable:!0})}),p.a.createElement(E,{item:this.props.item,isHidden:this.props.isHidden}))}}),S=l()({displayName:"noItems",mixins:[_],render:()=>p.a.createElement("div",{className:"no-items"},p.a.createElement(b.symbol,{name:"createYourFirstItem",className:"no-items-image"}),p.a.createElement("span",{className:"no-items-title"},Object(u.translate)("list_dbe_this_list_is_empty")),p.a.createElement("div",{className:"no-items-click-container"},p.a.createElement("span",null,Object(u.translate)("list_dbe_empty_sate_line2"))))}),L=i(13),k=l()({displayName:"itemListFilterBubble",mixins:[h.translationMixin],propTypes:{value:r.a.any.isRequired,onChange:r.a.func.isRequired,options:r.a.arrayOf(r.a.shape({label:r.a.string.isRequired,value:r.a.any.isRequired})).isRequired},render(){return p.a.createElement("div",{className:"item-list-filter-bubble"},o.a.map(this.props.options,e=>p.a.createElement("div",{key:e.value,onClick:()=>{this.props.onChange(e.value)},className:Object(h.cx)({"item-list-filter-bubble-option":!0,selected:this.props.value===e.value})},p.a.createElement(L.symbol,{name:"check"}),p.a.createElement("span",null,this.translateIfNeeded(e.label)))))}}),C=i(5);const N={all:"list_dbe_items_filter_all",visible:"list_dbe_items_filter_visible",hidden:"list_dbe_items_filter_hidden"};function y(e){this.props.onChange(e),this.closeBubble()}var D=l()({displayName:"itemListFilter",propTypes:{value:r.a.oneOf(["all","visible","hidden"]).isRequired,onChange:r.a.func.isRequired},getInitialState:()=>({isBubbleOpen:!1}),getValueLabel(){return Object(u.translate)(N[this.props.value])},toggleBubble(){this.setState({isBubbleOpen:!this.state.isBubbleOpen})},closeBubble(){this.setState({isBubbleOpen:!1})},getBubbleContent(){return p.a.createElement(k,{value:this.props.value,onChange:y.bind(this),options:o.a.map(N,(function(e,t){return{label:e,value:t}}))})},render(){return p.a.createElement("span",{className:Object(h.cx)({"item-list-filter":!0,"is-open":this.state.isBubbleOpen})},p.a.createElement("span",null,Object(u.translate)("list_dbe_items_filter_label")," "),p.a.createElement("span",{ref:"handler",onClick:this.toggleBubble,className:"item-list-filter-value-label"},this.getValueLabel(),p.a.createElement(L.symbol,{name:"arrowDown"})),this.state.isBubbleOpen?p.a.createElement(b.bubble,{key:"itemFilterBubble",value:this.getBubbleContent(),closeTriggers:[C.default.UI.TOOLTIP.TRIGGERS.CLICK,C.default.UI.TOOLTIP.TRIGGERS.OUTER_CLICK],alignment:C.default.UI.TOOLTIP.ALIGNMENT.BOTTOM,styleType:C.default.UI.TOOLTIP.STYLE_TYPE.CONTENT_ONLY,hideMethod:this.closeBubble,targetNode:this.refs.handler}):null)}});function T(e){const t=this.getSelectedIds();return o.a.filter(e,(function(e){return o.a.includes(t,e._iid)}))}var O=l()({displayName:"itemsList",mixins:[_,h.selectionMixin,h.propTypesFilterMixin],propTypes:{items:r.a.array.isRequired,hiddenItems:r.a.array.isRequired,openedItemId:r.a.string,listName:r.a.string.isRequired,listId:r.a.string.isRequired,visibleFields:r.a.arrayOf(r.a.string)},getDefaultProps:()=>({openedItemId:void 0}),getInitialState:()=>({itemsFilter:"all"}),duplicateSelectedItems(){this.getDbEditorApi().duplicateItems(T.call(this,this.filteredItems()),"multiple_selection"),this.clearSelection()},deleteSelectedItems(){this.getDbEditorApi().deleteItems(T.call(this,this.filteredItems()),"multiple_selection",this.clearSelection)},showHideSelectedItems(){const e=T.call(this,this.props.items),t=T.call(this,this.props.hiddenItems),i=t.length>0?"showItems":"hideItems";this.getDbEditorApi()[i](e.concat(t),"multiple_selection")},addItem(){const e=this.props.openedItemId?"item_view":"list_view";this.getDbEditorApi().addItem(e,function(e){this.getDbEditorApi().setCurrentItem(e)}.bind(this)),this.clearSelection(),o.a.includes(["all","visible"],this.state.itemsFilter)||this.setState({itemsFilter:"all"})},setCurrentItem(e){const t=this.getDbEditorApi(),i=this.props.openedItemId?"item_view":"list_view";t.setCurrentItem(e,i)},toggleItem(e){const t=this.isSelected(e);this.toggle(e),this.getDbEditorApi().bi.itemSelectionToggle(this.props.listId,e,!t)},toggleAllItems(){const e=o.a.map(this.filteredItems(),"_iid"),t=!o.a.isEmpty(this.getSelectedIds());this.toggleAll(e),this.getDbEditorApi().bi.allItemsSelectionToggle(this.props.listId,!t)},getItemsSelectionLabel(e){switch(e){case 0:return Object(u.translate)("list_dbe_select_all_label");case 1:return Object(u.translate)("list_dbe_1_items_selected");default:return Object(u.translate)("list_dbe_x_items_selected").replace("<X>",e)}},allItems(){return this.props.items.concat(this.props.hiddenItems)},setItemsFilter(e){this.setState({itemsFilter:e}),this.clearSelection()},filteredItems(){switch(this.state.itemsFilter){case"all":return this.allItems();case"visible":return this.props.items;case"hidden":return this.props.hiddenItems;default:return this.props.items}},shouldShowVisibleItems(){return this.props.items.length&&o.a.includes(["all","visible"],this.state.itemsFilter)},shouldShowHiddenItems(){return this.props.hiddenItems.length&&o.a.includes(["all","hidden"],this.state.itemsFilter)},render(){var e;const t=b.sortByDragList,i=this.getSelectedIds().length;return p.a.createElement("div",Object.assign({},this.filteredProps(),{className:Object(h.cx)("items-list ".concat(this.props.openedItemId?"small":""),null===(e=this.filteredProps())||void 0===e?void 0:e.className)}),p.a.createElement("header",{className:"list-header"},p.a.createElement("span",{className:"list-header-left-pane"},p.a.createElement("span",{className:"list-title"},this.props.listName),this.props.openedItemId?null:p.a.createElement(D,{key:"itemListFilter",value:this.state.itemsFilter,onChange:this.setItemsFilter})),p.a.createElement(b.button,{label:"list_dbe_edit_item_add_item",onClick:this.addItem,className:"add-item-btn"})),p.a.createElement("div",{className:this.props.openedItemId?"add-item-container":"select-all-container"},p.a.createElement("span",{className:"select-all-checkbox"},p.a.createElement(I.a.Checkbox,{labelAfterSymbol:!0,value:i>0,indeterminate:i>0&&i<this.filteredItems().length,label:this.getItemsSelectionLabel(i),shouldTranslate:!1,onChange:()=>{this.toggleAllItems()}})),this.props.openedItemId?p.a.createElement(b.button,{key:"list-view-add-btn",label:"list_dbe_edit_item_add_item",onClick:this.addItem,className:"small-add-item"}):null,this.getSelectedIds().length>0?p.a.createElement("span",{key:"multi-select-actions",className:"multi-select-action-menu checked"},p.a.createElement(b.button,{label:"list_dbe_duplicate_Items",icon:"duplicate",onClick:this.duplicateSelectedItems,className:"multi-duplicate"}),p.a.createElement(b.button,{label:"list_dbe_delete_items",icon:"delete",onClick:this.deleteSelectedItems,className:"multi-delete"}),p.a.createElement(b.button,{label:"list_dbe_show_hide_multiple_items",icon:"quickActionsShow",onClick:this.showHideSelectedItems,className:"multi-show-hide"})):null),0!==this.allItems().length||this.props.loading?null:p.a.createElement(S,{key:"no-items"}),p.a.createElement(I.a.CustomScroll,{heightRelativeToParent:"calc(100% - 120px)"},p.a.createElement("div",{className:this.props.openedItemId?"items-container-edit":"items-container"},this.shouldShowVisibleItems()?p.a.createElement(t,{ref:"sortList",key:"da-list",onItemMoved:this.getDbEditorApi().moveItem,childrenTransition:c.contentAddRemove,className:Object(h.cx)({"sort-list":!this.props.openedItemId,"item-edit-sort-list":this.props.openedItemId,"visible-items-container":!0})},o.a.map(this.props.items,(e,t)=>p.a.createElement(f,{key:e._iid,item:e,isHidden:!1,isOpened:!!this.props.openedItemId,isSelected:this.isSelected(e._iid),visibleFields:this.props.visibleFields,onSelect:()=>{this.toggleItem(e._iid)},onStartDrag:e=>{this.props.openedItemId||this.refs.sortList.startDrag(t,e)},className:Object(h.cx)({"hidden-item":!1,selected:this.isSelected(e._iid),"no-hover":i>0,"is-open":this.props.openedItemId===e._iid})}))):null,this.shouldShowHiddenItems()?p.a.createElement("span",{key:"hidden-items-container",className:"hidden-items-container"},o.a.map(this.props.hiddenItems,e=>p.a.createElement(f,{key:e._iid,item:e,isHidden:!0,isOpened:!!this.props.openedItemId,isSelected:this.isSelected(e._iid),visibleFields:this.props.visibleFields,onSelect:()=>{this.toggleItem(e._iid)},className:Object(h.cx)({"hidden-item":!0,selected:this.isSelected(e._iid),"no-hover":i>0,"is-open":this.props.openedItemId===e._iid})}))):null)))}});var A={propTypes:{item:r.a.object.isRequired,fieldDef:r.a.object.isRequired},mixins:[_],getFieldDisplayName(){return this.props.fieldDef.displayName||this.props.fieldDef.name},getFieldValue(e,t){const i=t||this.props;let s=i.item[i.fieldDef.name];var a;return e&&(a=s,s=(e||[]).reduce((function(e,t){return null==e?void 0:e[t]}),a)),s},updateFieldValue(e,t){const i=[this.props.fieldDef.name].concat(t||[]).concat(e),s=i.reduceRight((function(e,t){const i={};return i[t]=e,i}));this.getDbEditorApi().updateItem(this.props.item._type,this.props.item._iid,s)},linkedFieldValue(e){const t=this;return{value:this.getFieldValue(e),requestChange(i){t.updateFieldValue(i,e)}}},hasLink(){return this.props.item.links&&!!this.props.item.links[this.props.fieldDef.name]},getLinkToFieldProps(){return o.a.pick(this.props,["item","fieldDef","visibleSections"])}},F=i(26);function x(){var e;return p.a.createElement(F.commonControls.linkTo,Object.assign({value:this.getLinkData(),onChange:this.setLinkData,showButton:!1,showIcon:!0},this.filterProps(),{className:Object(h.cx)(h.inheritClassName("input-link-to-field"),null===(e=this.filterProps())||void 0===e?void 0:e.className)}))}function P(){return p.a.createElement(F.commonControls.linkToButton,Object.assign({value:this.getLinkData(),onChange:this.setLinkData},this.filterProps()))}var M=l()({displayName:"linkToField",propTypes:{item:r.a.object.isRequired,fieldDef:r.a.object.isRequired,useLinkButton:r.a.bool,label:r.a.string,placeholder:r.a.string,minCharsForTooltip:r.a.number,showButton:r.a.bool,buttonEditLabel:r.a.string,buttonAddLabel:r.a.string},mixins:[_],getDefaultProps:()=>({useLinkButton:!1}),getLinkData:function(){return this.props.item.links&&this.props.item.links[this.props.fieldDef.name]},setLinkData(e){const t={};t[this.props.fieldDef.name]=e,this.getDbEditorApi().updateItem(this.props.item._type,this.props.item._iid,{links:t})},filterProps(){return o.a.omit(this.props,["pages","anchors","value","onChange","valueLink"])},render(){return(this.props.useLinkButton?P:x).call(this)}}),w=l()({displayName:"textItemField",mixins:[A],render(){var e;return p.a.createElement("div",{className:"text-item-field"},p.a.createElement("label",{className:"item-field-title"},this.getFieldDisplayName()),p.a.createElement("div",{className:"text-input"},p.a.createElement(b.textInput,{value:o.a.unescape(this.getFieldValue()),onChange:e=>{this.updateFieldValue(o.a.escape(e))},maxLength:500,placeholder:this.props.placeholder}),this.hasLink()?null:p.a.createElement(M,Object.assign({key:"noLink",useLinkButton:!0},this.getLinkToFieldProps()))),this.hasLink()?p.a.createElement(M,Object.assign({key:"hasLink",label:"list_dbe_edit_item_link_label",placeholder:"list_dbe_edit_item_link_placeholder"},this.getLinkToFieldProps(),{className:Object(h.cx)("input-link-to",null===(e=this.getLinkToFieldProps())||void 0===e?void 0:e.className)})):null)}}),R=l()({displayName:"buttonItemField",mixins:[A],render(){return p.a.createElement("div",{className:"text-item-field"},p.a.createElement("label",{className:"item-field-title"},this.getFieldDisplayName()),p.a.createElement("div",{className:"text-input"},p.a.createElement(b.textInput,{valueLink:this.linkedFieldValue(),placeholder:"list_dbe_button_placeholder",maxLength:100})),p.a.createElement(M,Object.assign({label:"list_dbe_edit_item_link_label",placeholder:"list_dbe_edit_item_link_placeholder"},this.getLinkToFieldProps()),'showIcon="',!0,'"'))}});const B=["January","February","March","April","May","June","July","August","September","October","November","December"],j=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var V=l()({displayName:"dateItemField",mixins:[A],getInitialState:()=>({dateBubbleOpen:!1}),getDatePicker(e){const t={value:e,onChange:this.updateDate,todayLabel:"list_DatePicker_TodayButton_Label",goToSelectedLabel:"list_DatePicker_GoToSelectedButton_Label",monthNames:o.a.map(B,(function(e){return"list_DatePicker_MonthsConstLong_".concat(e)})),days:o.a.map(j,(function(e){return"list_DatePicker_DayConstShort_".concat(e)})),startDay:"list_DatePicker_DayConstShort_Sunday",popOnlyValue:!0,showDelete:!0};return p.a.createElement(b.datePicker,t)},getValueAsDate(){const e=this.getFieldValue();return(null==e?void 0:e.iso)?new Date(e.iso):null},updateDate(e){this.updateFieldValue(e?e.toISOString():"","iso"),this.toggleDateBubble()},toggleDateBubble(){this.setState({dateBubbleOpen:!this.state.dateBubbleOpen})},hideDateBubble(){this.setState({dateBubbleOpen:!1})},render(){var e;const t=this.getValueAsDate();return p.a.createElement("div",{className:"date-item-field"},p.a.createElement("label",{className:"item-field-title"},this.getFieldDisplayName()),p.a.createElement("div",{className:"text-input"},p.a.createElement("div",{onClick:this.toggleDateBubble,className:Object(h.cx)({"control-text-input":!0,"date-picker-open":this.state.dateBubbleOpen})},p.a.createElement(L.symbol,{name:"calendar"}),p.a.createElement("span",{ref:"dateSpan",className:Object(h.cx)({disabled:o.a.isEmpty(this.getFieldValue().iso)})},t?t.toLocaleDateString():Object(u.translate)("list_dbe_date_empty"))),this.hasLink()?null:p.a.createElement(M,Object.assign({key:"add-link-button",useLinkButton:!0},this.getLinkToFieldProps()))),this.hasLink()?p.a.createElement(M,Object.assign({key:"link-to-field",label:"list_dbe_edit_item_link_label",placeholder:"list_dbe_edit_item_link_placeholder"},this.getLinkToFieldProps(),{className:Object(h.cx)("input-link-to",null===(e=this.getLinkToFieldProps())||void 0===e?void 0:e.className)})):null,p.a.createElement(c.tooltipAnimation,null,this.state.dateBubbleOpen?p.a.createElement(b.bubble,{key:"dateBubble",value:this.getDatePicker(t),width:"301px",closeTriggers:[C.default.UI.TOOLTIP.TRIGGERS.OUTER_CLICK],alignment:C.default.UI.TOOLTIP.ALIGNMENT.BOTTOM,styleType:C.default.UI.TOOLTIP.STYLE_TYPE.CONTENT_ONLY,hideMethod:this.hideDateBubble,targetNode:this.refs.dateSpan,ref:"popup",style:{position:"absolute"}}):null))}}),U=l()({displayName:"imageItemField",mixins:[A],updateTitle(e){this.updateFieldValue(e,["title"])},getWPhotoData:e=>o.a.assign({type:"Image",uri:e.src},o.a.pick(e,["title","width","height"])),onMediaRemoved(e){const t={src:"",title:"",height:0,width:0};e&&o.a.assign(t,{src:e.uri,title:e.title,height:e.height,width:e.width}),this.updateFieldValue(t)},render(){var e;const t=this.getFieldValue();return p.a.createElement("div",null,p.a.createElement("label",{className:"item-field-title"},this.getFieldDisplayName()),p.a.createElement("div",{className:"image-item-field"},p.a.createElement(b.imageChangeRemove,{addButtonLabel:"list_dbe_edit_item_image_add_image",changeButtonLabel:"list_dbe_edit_item_change_image",removeButtonLabel:"list_dbe_edit_item_remove_image",onChange:this.onMediaRemoved,mediaManager:this.getDbEditorApi().mediaServices.mediaManager,focusEditorFunc:this.getDbEditorApi().mediaServices.setFocusToEditor,value:this.getWPhotoData(t),className:"image-panel"}),p.a.createElement("div",{className:"text-panel"},p.a.createElement(b.textInput,{label:"list_dbe_edit_item_alt",placeholder:"list_dbe_edit_item_alt_placeholder",value:t.title,onChange:this.updateTitle,maxLength:100,disabled:o.a.isEmpty(t.src)}),p.a.createElement(M,Object.assign({label:"list_dbe_edit_item_link_label",placeholder:"list_dbe_edit_item_link_placeholder",disabled:o.a.isEmpty(t.src),showIcon:!0},this.getLinkToFieldProps(),{className:Object(h.cx)("input-link-to",null===(e=this.getLinkToFieldProps())||void 0===e?void 0:e.className)})))))}}),q=i(7),G=i(32);const H=/<hatul[^>]*>/gi,K=/<\/hatul>/gi;function W(e){var t;return(null!==(t=null==e?void 0:e.version)&&void 0!==t?t:0)>=3||(e.text=e.text.replace(H,"").replace(K,""),e.version=3),e}var Y=i(170),J=i.n(Y),X=i(11),z=i.n(X);const Q=l()({displayName:"richTextItemField",mixins:[A],getInitialState:()=>({editing:!1}),getToolbarProps(){const e=this.getDbEditorApi().getSiteInfo();return{themeColors:e.theme.colors.getAll(),themeFonts:e.theme.fonts.getAll(),fonts:G.fontUtils.getCurrentSelectableFontsWithParams(e),themeMap:e.theme.fonts.getMap(),isColorPickerClosed:this.isColorPickerClosed(),isLinkDialogClosed:this.isLinkDialogClosed(),isDeveloperMode:e.developerMode.isEnabled()}},isColorPickerClosed(){return this.props.isColorPickerClosed},isLinkDialogClosed(){return this.props.isLinkDialogClosed},getValue(){let e=this.getFieldValue();return"2.0"===this.getDbEditorApi().getCurrentListVersion()&&(e=W(e)),{text:e.text,linkList:e.links}},getInitialValue(){return G.dataUtils.wrapOrphans(this.getValue().text)},handleDataChanged(e){this.updateValue({text:e,linkList:this.linksHelper.getAllLinks()})},updateValue(e){const t={text:e.text,links:e.linkList};"2.0"===this.getDbEditorApi().getCurrentListVersion()&&(t.version=3),this.updateFieldValue(t)},getPanelManager(){return this.getDbEditorApi().panelManager},openLinkDialog(e,t){const i=this.getDbEditorApi(),s=h.link.getLinkPanelProps(i.documentServices,{link:e,callback:t,visibleSections:this.props.visibleSections});i.panelManager.openPanel("panels.toolPanels.linkPanel",s)},setReady(e){this.manager=e;const t=this;this.manager.onCmdStateChange((function(e){t.setState({cmdState:e})}));const i=this.getDbEditorApi().siteInfo.theme.fonts.getAll(),s=G.fontUtils.getUploadedUsedFonts(this.getValue().text,i);G.ckUtils.insertUploadedFontsToCk(s,this.manager),this.manager.onFocus((function(){t.onFocus()})),this.linksHelper.setCurrentLinks(this.getValue().linkList);const a=this.manager.getCommandsStates();this.setState({cmdState:a})},openColorPicker(e,t,i,s,a){this.getDbEditorApi().panelManager.openPanel("panels.toolPanels.colorPicker.colorPickerPanel",{value:t,onChange:e,isBlockingLayerFullScreen:!0,shouldBlockOuterScroll:!0,top:s.top,left:s.left,previewOnHover:a},!0)},onFocus(){G.ckUtils.removeOverflowCss(this.manager),this.setState({editing:!0})},isFocusOnToolbar(){if(this.refs.toolbar)return!this.isColorPickerClosed()||!this.isLinkDialogClosed()||this.refs.toolbar.isAnyDropdownOpen()},onOuterClick(){this.isFocusOnToolbar()||(G.ckUtils.setOverflowCss(this.manager),this.setState({editing:!1}),this.clearUnusedLinks(),this.manager.unRegisterListener(this.handleCommandState))},getNonPasteableLinkTypes:()=>o.a.pick(h.link.LinkTypes,["PHONE_LINK"]),componentWillMount(){this.linksHelper=new G.LinksHelper([],this.getNonPasteableLinkTypes()),this.linksManager=new G.TextLinksManager(this.linksHelper),this.stylesManager={getFonts:o.a.partial(G.fontUtils.getCurrentSelectableFontsWithParams,this.getDbEditorApi().siteInfo,!1,!0)}},getStyleManager(){return this.stylesManager},getLinksManager(){return this.linksManager},onCutOrCopy(){this.linksHelper.cacheCopiedLinks()},clearUnusedLinks(){const e=this.linksHelper.getAllLinks(),t=this.manager.getLinkRefsList(),i=o.a.filter(e,(function(e){return o.a.includes(t,e.id)}));if(!o.a.isEqual(i,this.getValue().linkList)){const e=this;this.updateValue({text:e.getValue().text,linkList:i})}},isExperimentOpen:(...e)=>z.a.isOpen(...e),render(){return p.a.createElement("div",{className:Object(h.cx)({"rich-text-item-field":!0,editing:this.state.editing})},p.a.createElement("label",{className:"item-field-title"},this.getFieldDisplayName()),p.a.createElement("div",{className:Object(h.cx)({"rich-text-input-control":!0,"rich-text-input":!0,"with-toolbar":this.state.editing})},p.a.createElement(G.richTextFrame,{onOuterClick:this.onOuterClick},this.state.editing?p.a.createElement(G.textToolBar,Object.assign({key:"textToolbar",ref:"toolbar",textManager:this.manager,linksHelper:this.linksHelper,cmdState:this.state.cmdState,openLinkPanel:this.openLinkDialog,openColorPicker:this.openColorPicker},this.getToolbarProps())):null,p.a.createElement(J.a.TextEditor,{initialData:this.getInitialValue(),onReady:this.setReady,showToolbar:!1,validateHtml:!1,documentServicesApi:this.getDbEditorApi().siteInfo,isExperimentOpen:this.isExperimentOpen,stylesManager:this.getStyleManager(),linksManager:this.getLinksManager(),onDataChange:this.handleDataChanged,autoGrow:!1,onCut:this.onCutOrCopy,onCopy:this.onCutOrCopy}))))}});function Z(){this.success=!0;if(this.setState({status:"valid"}),o.a.isEmpty(this.state.videoUrl))this.updateFieldValue({videoId:""});else{const e=h.videoUtils.getVideoDataFromUrl(this.state.videoUrl);this.updateFieldValue({videoType:e.videoType,videoId:e.videoId})}o.a.delay(function(){this.success=!1,this.setState({status:"idle"})}.bind(this),2e3)}function $(){this.setState({status:"invalid"}),this.refs.textInput.focus()}const ee={string:w,"string|asprice":w,"string|asbutton":R,"wix:image":U,"wix:richtext":h.hoc.connect(e=>({isColorPickerClosed:q.editorPlugins.panels.selectors.isColorPickerClosed(e),isLinkDialogClosed:q.editorPlugins.panels.selectors.isLinkDialogClosed(e)}))(Q),"wix:video":l()({displayName:"videoItemField",mixins:[A],getInitialState(){return{status:"idle",videoUrl:this.getVideoUrl()}},componentWillReceiveProps(e){const t=this.getVideoUrl(e);o.a.isEqual(this.getVideoUrl(),t)||this.updateVideoUrl(t)},getVideoUrl(e){return h.videoUtils.getVideoUrl(this.getFieldValue(null,e))},updateVideoUrl(e){this.setState({status:this.success?this.state.status:"idle",videoUrl:e})},handleClick(){o.a.isEmpty(this.state.videoUrl)?o.a.defer(Z.bind(this)):h.videoUtils.verifyVideoUrl(this.state.videoUrl,Z.bind(this),$.bind(this))},render(){const e=this.state.status;return p.a.createElement("div",{className:"video-item-field"},p.a.createElement("label",{className:"item-field-title"},this.getFieldDisplayName()),p.a.createElement("div",{className:"inputs-container ".concat(e)},p.a.createElement(b.videoInput,{valueLink:this.linkedFieldValue(),nonEmptyButtonLabel:"list_dbe_edit_item_search_video",emptyButtonLabel:"list_dbe_edit_item_search_video",panelManager:this.getDbEditorApi().panelManager}),p.a.createElement("div",null,p.a.createElement(b.textInput,{ref:"textInput",label:"list_dbe_edit_item_video_url",value:this.state.videoUrl,onChange:this.updateVideoUrl,placeholder:this.props.placeholder,className:"video-url-input"}),p.a.createElement("div",{className:"error-msg-and-button"},p.a.createElement("span",null,"invalid"===e?Object(u.translate)("list_dbe_edit_item_bad_video_url"):""),this.state.videoUrl!==this.getVideoUrl()&&"idle"===e?p.a.createElement(b.button,{key:"update-button",label:"list_dbe_edit_item_update_video_url",onClick:this.handleClick,className:"update-button"}):null,"idle"!==e?p.a.createElement(b.symbol,{key:"validation-status",name:"valid"===e?"inputValidationSuccess":"inputValidationError"}):null))))}}),"wix:date":V},te={Error:"list_dbe_edit_item_status_error",Saving:"list_dbe_edit_item_status_saving",Saved:"list_dbe_edit_item_status_saved",Idle:"list_dbe_edit_item_status_idle",Failed:"list_dbe_edit_item_status_error"},ie={Title:"list_dbe_title_placeholder",Subtitle:"list_dbe_subtitle_placeholder",Description:"list_dbe_description_placeholder",Price:"list_dbe_price_placeholder",Video:"list_dbe_edit_item_video_link_placeholder"};function se(e){var t;const i=null===(t=e.metadata)||void 0===t?void 0:t.showAsHint,s=o.a.compact([e.type,i]).join("|");return ee[s.toLowerCase()]}function ae(e){if(e.item._iid!==this.props.item._iid)this.setState({saveLabel:null});else{let i=e.saveState!==this.props.saveState;i=i&&!("Idle"===e.saveState&&o.a.includes(["Saved","Failed","Error"],this.props.saveState)),i&&this.setState({saveLabel:(t=e.saveState,te[t])})}var t}var le=l()({displayName:"itemEdit",mixins:[_,h.propTypesFilterMixin,h.blockOuterScrollMixin],propTypes:{item:r.a.object.isRequired,itemSchema:r.a.object.isRequired,saveState:r.a.string.isRequired,visibleFields:r.a.arrayOf(r.a.string)},getInitialState:()=>({saveLabel:null}),componentWillReceiveProps(e){ae.call(this,e)},getFields(){const e=this;return o()(e.props.itemSchema.fields).filter((function(t){return o.a.includes(e.props.visibleFields,t.name)||"title"===t.name})).map((function(e){return{component:se(e),definition:e,placeholder:ie[e.displayName]||""}})).filter("component").value()},render(){var e;const t=this.props.item;return p.a.createElement("div",Object.assign({key:this.props.item._iid},this.filteredProps(),{className:Object(h.cx)("item-edit",null===(e=this.filteredProps())||void 0===e?void 0:e.className)}),p.a.createElement("div",{className:"no-scroll-container"},p.a.createElement("header",{className:"item-header"},p.a.createElement("div",{className:"button-container"},p.a.createElement(b.button,{icon:"arrowRight",label:"list_dbe_edit_item_close_item",onClick:()=>{this.getDbEditorApi().setCurrentItem(null)},className:"close-item-btn"})),p.a.createElement("span",{className:"action-container"},this.state.saveLabel?p.a.createElement("div",{key:"save-item-label",className:"save-item-label"},Object(u.translate)(this.state.saveLabel)):null,p.a.createElement(b.tooltip,{value:"list_dbe_hover_item_delete_tooltip"},p.a.createElement(b.button,{icon:"delete",onClick:()=>{this.getDbEditorApi().deleteItems([t],"edit_item")},className:"delete-item-btn"})),p.a.createElement(b.tooltip,{value:"list_dbe_hover_item_duplicate_tooltip"},p.a.createElement(b.button,{icon:"duplicate",onClick:()=>{this.getDbEditorApi().duplicateItems([t],"edit_item")},className:"duplicate-item-btn"}))))),p.a.createElement(I.a.CustomScroll,{heightRelativeToParent:"calc(100% - 67px)"},p.a.createElement("div",{className:"item-fields-container"},o.a.map(this.getFields(),(e,i)=>p.a.createElement("div",{key:e.definition.name,className:"item-field"},p.a.createElement(e.component,{ref:i,item:t,fieldDef:e.definition,placeholder:e.placeholder,visibleSections:{PhoneLink:!1}}))),p.a.createElement("div",{className:"unused-fields-text"},Object(u.translate)("list_dbe_edit_hiding_unused_fields")))))}}),ne=l()({displayName:"dbEditor",mixins:[c.animationManager],propTypes:{dbEditorApi:r.a.object.isRequired,currentListId:r.a.string,items:r.a.array,hiddenItems:r.a.array,currentItemId:r.a.string,listName:r.a.string,itemSchema:r.a.object,saveState:r.a.string,visibleFields:r.a.arrayOf(r.a.string)},childContextTypes:{dbEditorApi:r.a.object.isRequired,mediaServices:r.a.object},getDefaultProps:()=>({items:[]}),componentDidMount(){this.props.dbEditorApi.bi.dbEditorOpenSuccess(this.props.currentListId)},componentWillUnmount(){this.props.dbEditorApi.updateList()},getChildContext(){return{dbEditorApi:this.props.dbEditorApi,mediaServices:this.props.dbEditorApi.mediaServices}},getItem(e){return o.a.find(this.props.items,{_iid:e})||o.a.find(this.props.hiddenItems,{_iid:e})},blockMiddleMouseClick(e){if(1===e.button)return!1},render(){return p.a.createElement("div",{onMouseDown:this.blockMiddleMouseClick,className:"db-editor-container"},p.a.createElement(O,{items:this.props.items,hiddenItems:this.props.hiddenItems,openedItemId:this.props.currentItemId,listName:this.props.listName,listId:this.props.currentListId,visibleFields:this.props.visibleFields}),p.a.createElement(c.dbEditItemSlide,{direction:"right"},this.props.currentItemId?p.a.createElement(le,{key:"item-edit",item:this.getItem(this.props.currentItemId),itemSchema:this.props.itemSchema,visibleFields:this.props.visibleFields,saveState:this.props.saveState}):null))}}),re=i(172);const de="Idle",oe="Saved",ce="Failed",me="Saving";function pe(e){return"databaseEditor.panels.".concat(e)}function he(e){const t=this.dataService.wasRepoLoadErroneous(),i=this.dataService.wasListLoadErroneous(e);t||i?(this.bi.listLoadFailed(e,!t,!i),this.panelManager.openPanel(pe("loadFailedMessagePanel"),{onConfirm(){window.location.reload()}})):ue.call(this)}function ue(){const e=Ee.call(this);o.a.forEach(this.stateChangedCallbacks,(function(t){t(e)}))}function _e(){return this.appbuilderServices.data.lists.getItems(this.currentListId)}function be(){return this.appbuilderServices.data.lists.getHiddenItems(this.currentListId)}function ge(){return this.appbuilderServices.data.lists.getListName(this.currentListId)}function Ie(){const e=this.appbuilderServices.layout.getAllFields,t=o()(this.currentListId).thru(e).reject("hidden").map("name").value(),i=o()(e(this.currentListId,"Mobile")).reject("hidden").map("name").value();return o.a.uniq(t.concat(i))}function ve(e,t){t?window.setTimeout(ve.bind(this,e),t):(this.saveState=e,ue.call(this))}function Ee(){const e=this.dataService.wasRepoLoaded(),t=e&&this.dataService.wasListLoaded(this.currentListId);return{currentListId:this.currentListId,items:t?_e.call(this):[],hiddenItems:t?be.call(this):[],currentItemId:this.currentItemId,listName:e?ge.call(this):null,itemSchema:e?this.appbuilderServices.data.lists.getItemSchema(this.currentListId):null,visibleFields:this.visibleFields,dbEditorApi:this,openPanels:this.panelManager.getOpenPanels(),saveState:this.saveState,loading:!t}}function fe(){this.sohuldRender=!0,!0!==this.disableAutoSave?this.saveState!==me?(ve.call(this,me),this.appbuilderServices.save(function(){if(ve.call(this,oe),this.savePending)return this.savePending=!1,void fe.call(this);window.setTimeout(function(){this.saveState!==me&&ve.call(this,de)}.bind(this),this.idleTimeout)}.bind(this),function(){this.savePending=!1,ve.call(this,ce),ve.call(this,de,this.idleTimeout),this.panelManager.openPanel(pe("saveFailedMessagePanel"))}.bind(this))):this.savePending=!0:ue.call(this)}function Se(e,t){return o.a.filter(e,(function(e){return o.a.find(t,{_iid:e._iid})}))}function Le(e,t){const i=o.a.assign({},t,{title:Object(u.translate)("list_dbe_prefix_for_duplicated_item")+t.title});return this.appbuilderServices.data.items.create(e,i)}function ke(e,t,i,s,a,l,n,r,d,c,m){o.a.bindAll(this,["getServiceTopology","setCurrentList","getPagesData","getSiteMenuItems","createDefaultDataItem","setCurrentItem","debouncedSave","broadcastStateChanged","moveItem","addItem","updateItem","duplicateItems","deleteItems","showItems","hideItems","getCurrentListVersion","registerForStateChanged","getSiteInfo"]),this.disableAutoSave=c,this.idleTimeout=r,this.dataService=e,this.appbuilderServices=i.wixapps.appbuilder,this.documentServices=i,this.siteInfo=s,this.serviceTopology=a,this.stateChangedCallbacks=[],this.currentListId=n,this.currentItemId=null,this.saveState=de,this.savePending=!1,this.sohuldRender=!1,this.panelManager=function(e){const t=Object.create(e);return t.openPanel=function(t,i){e.openPanel(t,i,!0)},t}(l),this.mediaServices=m||re.create(this),this.bi=t,z.a.isOpen("appBuilderDataMigration")&&this.appbuilderServices.migration.migrateList(n),e.registerForUpdates(he.bind(this)),d&&(this.visibleFields=Ie.call(this),d(Ee.call(this)))}ke.prototype={updateList(){this.sohuldRender&&o.a.has(this.appbuilderServices.data,"markDataAsUpdated")&&(this.appbuilderServices.data.markDataAsUpdated(this.currentListId),this.sohuldRender=!1)},getServiceTopology(){return this.serviceTopology},setCurrentList(e){this.currentListId=e,this.currentItemId=null,this.dataService.loadListData(e),this.visibleFields=Ie.call(this),ue.call(this)},getPagesData(){return this.dsRead.pages.getPagesData()},getSiteMenuItems(){return this.dsRead.mainMenu.getMenu()},createDefaultDataItem(e){return this.dsRead.data.createItem(e)},setCurrentItem(e,t){this.currentItemId=e,ue.call(this),e&&t&&this.bi.itemEdit(t,this.currentListId,e)},debouncedSave:o.a.debounce(fe,500),broadcastStateChanged:ue,moveItem(e,t){const i=this.appbuilderServices.data.lists.selection.get(this.currentListId),s=i.itemIds,a=s[e];s.splice(t,0,s.splice(e,1)[0]),this.bi.itemMove(this.currentListId,i.id,a),this.appbuilderServices.data.lists.selection.setManual(this.currentListId,s),fe.call(this)},addItem(e,t){t=t||o.a.noop;const i=this.appbuilderServices.data.lists.getDatabaseId(this.currentListId),s=this.appbuilderServices.data.items.create(i),a=this.appbuilderServices.data.lists.selection.get(this.currentListId),l=a.itemIds;return l.unshift(s),this.bi.itemAdd(e,this.currentListId,a.id,s),this.appbuilderServices.data.lists.selection.setManual(this.currentListId,l),t(s),fe.call(this),s},updateItem(e,t,i){this.appbuilderServices.data.items.update(e,t,i),this.debouncedSave(),ue.call(this)},duplicateItems(e,t){const i=o.a.map(e,"_iid"),s=this.appbuilderServices.data.lists.getDatabaseId(this.currentListId),a=this.appbuilderServices.data.lists.selection.get(this.currentListId);this.bi.itemsDuplicate(t,this.currentListId,a.id,i),o.a.forEach(Se(e,be.call(this)),o.a.bind(Le,this,s));const l=o.a.map(Se(e,_e.call(this)),o.a.bind(Le,this,s)),n=a.itemIds,r=o.a.findLastIndex(n,(function(e){return o.a.includes(i,e)}));n.splice.apply(n,[r+1,0].concat(l)),this.appbuilderServices.data.lists.selection.setManual(this.currentListId,n),this.currentItemId&&this.setCurrentItem(o.a.last(l)),fe.call(this)},deleteItems(e,t,i){const s=this;i=i||o.a.noop,this.panelManager.openPanel(pe("deleteItemsConfirmationPanel"),{onConfirm:function(){const a=s.appbuilderServices.data.lists.selection.get(s.currentListId);s.bi.itemsDelete(t,s.currentListId,a.id,o.a.map(e,"_iid")),o.a.forEach(e,(function(e){if(s.currentItemId===e._iid){const t=o.a.map(_e.call(s),"_iid"),i=t.indexOf(e._iid),a=t[i+1]||t[i-1]||null;s.setCurrentItem(a)}s.appbuilderServices.data.items.delete(e._type,e._iid)})),i(),fe.call(s)},onCancel:o.a.noop})},showItems(e){const t=this.appbuilderServices.data.lists.selection.get(this.currentListId),i=o.a.map(e,"_iid"),s=o.a.union(t.itemIds,i);this.appbuilderServices.data.lists.selection.setManual(this.currentListId,s),fe.call(this)},hideItems(e){const t=this.appbuilderServices.data.lists.selection.get(this.currentListId),i=o.a.map(e,"_iid"),s=o.a.difference(t.itemIds,i);this.appbuilderServices.data.lists.selection.setManual(this.currentListId,s),fe.call(this)},getCurrentListVersion(){return this.appbuilderServices.data.lists.getListVersion(this.currentListId)},registerForStateChanged(e){this.stateChangedCallbacks.push(e)},getSiteInfo(){return this.siteInfo}};var Ce=ke,Ne=l()({displayName:"deleteItems",render(){return p.a.createElement(F.frames.confirmationPanelFrame,{panelName:this.props.panelName,type:"important",panelTitle:Object(u.translate)("list_dbe_delete_are_you_sure_title"),onCancel:this.props.onCancel,onConfirm:this.props.onConfirm,confirmLabel:"list_dbe_delete_are_you_sure_confirm_button",cancelLabel:"list_dbe_delete_are_you_sure_cancel_button",className:"delete-list-items-confirmation"},p.a.createElement(b.symbol,{name:"garbage-truck-clipart",className:"image"}),p.a.createElement("div",{className:"text"},p.a.createElement("span",null,Object(u.translate)("list_dbe_delete_items_subtitle")),p.a.createElement("span",null,Object(u.translate)("list_dbe_delete_are_you_sure_text"))))}}),ye=i(14),De=l()({displayName:"saveFailedMessagePanel",mixins:[ye.mixins.editorAPIMixin],render(){return p.a.createElement(F.frames.messagePanelFrame,{panelName:this.props.panelName,confirmLabel:"list_dbe_general_error_button",panelTitle:Object(u.translate)("list_dbe_general_error_dialog_title"),className:"list-save-failed-panel"},p.a.createElement(I.a.Composites.RichTextWithIllustration,null,p.a.createElement(I.a.Illustration,null,p.a.createElement(b.symbol,{name:"plaster",className:"error-img"})),p.a.createElement(I.a.Composites.RichText,null,p.a.createElement(I.a.RichText,{type:"T01"},p.a.createElement("div",null,Object(u.translate)("list_dbe_general_error_dialog_subtitle")),p.a.createElement("div",null,Object(u.translate)("list_dbe_general_error_dialog_text")),p.a.createElement("br",null),p.a.createElement("div",null,Object(u.translate)("list_dbe_general_error_dialog_text_2")),p.a.createElement("a",{href:"https://www.wix.com/support/html5/",className:"support-link"},"https://www.wix.com/support/")))))}}),Te=l()({displayName:"loadFailedMessagePanel",render(){return p.a.createElement(F.frames.confirmationPanelFrame,{panelName:this.props.panelName,panelTitle:Object(u.translate)("list_dbe_loading_error_title"),onConfirm:this.props.onConfirm,onCancel:this.props.onCancel,confirmLabel:"list_dbe_loading_error_button",cancelLabel:"list_dbe_error_loading_close_manage_items",className:"list-load-failed-panel"},p.a.createElement(b.symbol,{name:"plaster",className:"error-img"}),p.a.createElement("div",{className:"msg-text"},p.a.createElement("span",null,Object(u.translate)("list_dbe_loading_error_subtitle")),p.a.createElement("span",null,Object(u.translate)("list_dbe_loading_error_text")),p.a.createElement("a",{href:"https://www.wix.com/support/html5/",className:"support-link"},"https://www.wix.com/support/")))}});var Oe={LIST_DB_MANAGER_OPENED:{src:59,endpoint:"listim2",evid:107,fields:{list_part_id:"string"}},LIST_DB_MANAGER_ERROR_LOADING:{src:59,endpoint:"listim2",evid:108,fields:{list_part_id:"string",error_description:"string"}},LIST_DB_MANAGER_REORDER_ITEMS_DROP:{src:59,endpoint:"listim2",evid:109,fields:{item_id:"string",list_part_id:"string",selector_id:"string"}},LIST_DB_MANAGER_ADD_NEW_ITEM_CLICK:{src:59,endpoint:"listim2",evid:110,fields:{origin:"string",list_part_id:"string",selector_id:"string",item_id:"string"}},LIST_DB_MANAGER_SELECT_ITEM_CLICK:{src:59,endpoint:"listim2",evid:113,fields:{list_part_id:"string",item_id:"string",state_after_click:"bool"}},LIST_DB_MANAGER_SELECT_ALL_CLICK:{src:59,endpoint:"listim2",evid:114,fields:{list_part_id:"string",state_after_click:"bool"}},LIST_DB_MANAGER_DUPLICATE_ITEM:{src:59,endpoint:"listim2",evid:117,fields:{origin:"string",list_part_id:"string",selector_id:"string",source_item_ids:"string"}},LIST_DB_MANAGER_DELETE_ITEMS_CLICK:{src:59,endpoint:"listim2",evid:118,fields:{origin:"string",list_part_id:"string",selector_id:"string",item_ids:"string"}},LIST_DB_MANAGER_EDIT_ITEM_CLICK:{src:59,endpoint:"listim2",evid:119,fields:{origin:"string",list_part_id:"string",item_id:"string"}},LIST_DB_MANAGER_LIST_LOAD_FAIL:{src:59,endpoint:"listim2",evid:121,fields:{list_part_id:"string",repo_loaded:"bool",data_loaded:"bool"}}},Ae=i(15),Fe=i.n(Ae);function xe(e){this._reportBI=e}xe.prototype={sendEvent(e,t){try{this._reportBI(e,t)}catch(e){Fe.a.log.info("Error sending BI event",e)}},dbEditorOpenSuccess(e){this.sendEvent(Oe.LIST_DB_MANAGER_OPENED,{list_part_id:e})},dbEditorOpenFailed(e,t){this.sendEvent(Oe.LIST_DB_MANAGER_ERROR_LOADING,{list_part_id:e,error_description:t.toString()})},listLoadFailed(e,t,i){this.sendEvent(Oe.LIST_DB_MANAGER_LIST_LOAD_FAIL,{list_part_id:e,repo_loaded:t?"true":"false",data_loaded:i?"true":"false"})},itemMove(e,t,i){this.sendEvent(Oe.LIST_DB_MANAGER_REORDER_ITEMS_DROP,{item_id:i,list_part_id:e,selector_id:t})},itemAdd(e,t,i,s){this.sendEvent(Oe.LIST_DB_MANAGER_ADD_NEW_ITEM_CLICK,{origin:e,list_part_id:t,selector_id:i,item_id:s})},itemsDuplicate(e,t,i,s){this.sendEvent(Oe.LIST_DB_MANAGER_DUPLICATE_ITEM,{origin:e,list_part_id:t,selector_id:i,source_item_ids:s.join(",")})},itemsDelete(e,t,i,s){this.sendEvent(Oe.LIST_DB_MANAGER_DELETE_ITEMS_CLICK,{origin:e,list_part_id:t,selector_id:i,item_ids:s.join(",")})},itemEdit(e,t,i){this.sendEvent(Oe.LIST_DB_MANAGER_EDIT_ITEM_CLICK,{origin:e,list_part_id:t,item_id:i})},itemSelectionToggle(e,t,i){this.sendEvent(Oe.LIST_DB_MANAGER_SELECT_ITEM_CLICK,{list_part_id:e,item_id:t,state_after_click:!!i})},allItemsSelectionToggle(e,t){this.sendEvent(Oe.LIST_DB_MANAGER_SELECT_ALL_CLICK,{list_part_id:e,state_after_click:!!t})}};var Pe=xe}}]);