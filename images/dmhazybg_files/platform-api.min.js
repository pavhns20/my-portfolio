!function(e,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n(require("lodash"));else if("function"==typeof define&&define.amd)define(["lodash"],n);else{var t="object"==typeof exports?n(require("lodash")):n(e._);for(var o in t)("object"==typeof exports?exports:e)[o]=t[o]}}(window,(function(e){return function(e){var n={};function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(o,i,function(n){return e[n]}.bind(null,i));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=6)}([function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isOperationAllowedInContext=n.runInContext=n.promiseApplied=void 0;var o=t(1);n.promiseApplied=function(e,n){return new Promise((function(t){e.waitForChangesApplied((function(){return t(n)}))}))},n.runInContext=function(e,n,t){return n.runInContext(e,t)},n.isOperationAllowedInContext=function(e,n){return!!(0,o.isExtensionContext)(e)||n===e.appDefinitionId}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.resolveOption=n.isExtensionContext=void 0;const o=t(3);n.isExtensionContext=e=>e.context===o.SDK_CONTEXT.EXTENSION,n.resolveOption=function(e,t,o,{isRequired:i}={isRequired:!1}){const r=n.isExtensionContext(e)?null==t?void 0:t[o]:null==e?void 0:e[o];if(i&&void 0===r)throw new Error(`option ${o} is required`);return r}},function(n,t){n.exports=e},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=Object.freeze({EXTENSION:"extension",DEFAULT:"default"});n.REGISTER_ERROR="registerError_",n.SDK_CONTEXT=o},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.navigateTo=void 0;var o,i=t(2),r=(o=i)&&o.__esModule?o:{default:o},a=t(0);n.navigateTo=function(e,n,t,o,i){var p=o.pageRef,u=o.pageLink,s=r.default.get(p,"id")||u;if(s)return(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.pages.navigateTo(s)})),(0,a.promiseApplied)(e,i)}},,function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.environment=n.wixapps=n.errors=n.account=n.accessibility=n.responsiveLayout=n.mobile=n.vfs=n.tpa=n.theme=n.fonts=n.siteMembers=n.siteSegments=n.routers=n.pagesGroup=n.pages=n.menu=n.language=n.info=n.history=n.controllers=n.components=n.application=n.initAutosave=n.save=n.waitForChangesApplied=void 0;var o=b(t(7)),i=b(t(8)),r=b(t(10)),a=b(t(11)),p=b(t(12)),u=b(t(13)),s=b(t(14)),f=b(t(15)),c=b(t(16)),d=b(t(18)),l=b(t(19)),g=b(t(20)),m=b(t(21)),I=b(t(22)),v=b(t(23)),C=b(t(24)),y=b(t(25)),D=b(t(26)),R=b(t(27)),P=b(t(28)),w=b(t(29)),x=b(t(30)),h=b(t(31));function b(e){return e&&e.__esModule?e:{default:e}}n.waitForChangesApplied=function(e,n){return e.waitForChangesApplied(n)},n.save=function(e){return new Promise((function(n,t){e.save((function(){return n()}),(function(e){return t(e)}))}))},n.initAutosave=function(e,n){return e.initAutosave(n)},n.application=o.default,n.components=i.default,n.controllers=r.default,n.history=p.default,n.info=u.default,n.language=s.default,n.menu=f.default,n.pages=c.default,n.pagesGroup=d.default,n.routers=l.default,n.siteSegments=g.default,n.siteMembers=m.default,n.fonts=a.default,n.theme=I.default,n.tpa=v.default,n.vfs=C.default,n.mobile=y.default,n.responsiveLayout=D.default,n.accessibility=R.default,n.account=P.default,n.errors=w.default,n.wixapps=x.default,n.environment=h.default},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=t(2),r=(o=i)&&o.__esModule?o:{default:o},a=t(0),p=t(1);n.default={install:function(e,n,t,o){var i=o.appDefinitionId,p=o.originInfo,u=o.editorType,s=o.sourceTemplateId;return new Promise((function(t,o){if(i){var f={appDefinitionId:r.default.get(n,"appDefinitionId")},c=p?r.default.assign({},p,f):f,d={origin:{initiator:"APP",type:u,info:c}};s&&(d.sourceTemplateId=s),(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.platform.provision(i,d).then(t,o)}))}else o(new Error("options must contain appDefinitionId"))}))},uninstall:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o.appDefinitionId;return new Promise((function(t){var o=(0,p.resolveOption)(n,{appDefinitionId:i},"appDefinitionId",{isRequired:!0});(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.platform.uninstall(o)})),e.waitForChangesApplied(t)}))},registerToCustomEvents:function(e,n,t,o){var i=o.eventTypes,r=o.applicationId,u=(0,p.resolveOption)(n,{applicationId:r},"applicationId",{isRequired:!0});return(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.platform.registerAppToCustomEvents(u,i)}))},appStudioWidgets:{changeVariation:function(e,n,t,o){var i=o.componentRef,r=o.variationId;return new Promise((function(t){(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.appStudioWidgets.changeVariation(i,r,t)}))}))},addWidget:function(e,n,t,o){var i=o.containerRef,r=o.widgetId,u=o.variationId,s=o.layout,f=o.installationType,c=o.appDefinitionId;return new Promise((function(t,o){var d=(0,p.resolveOption)(n,{appDefinitionId:c},"appDefinitionId",{isRequired:!0});(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.appStudioWidgets.addWidget(d,r,{containerRef:i,variationId:u,layout:s,installationType:f,onSuccess:t,onError:o})}))}))}},sessionState:{update:function(e,n,t,o){var i=o.stateMap;return(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.platform.sessionState.update(i)})),(0,a.promiseApplied)(e)}},livePreview:{refresh:function(e,n,t,o){var i=o.source,r=o.shouldFetchData,a=o.appDefinitionId,u=(0,p.resolveOption)(n,{appDefinitionId:a},"appDefinitionId",{isRequired:!0});return e.platform.livePreview.refresh({apps:[u],source:i||"EditorSDK",shouldFetchData:r})}}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=p(t(2)),i=t(0),r=t(1),a=p(t(9));function p(e){return e&&e.__esModule?e:{default:e}}n.default={add:function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.componentDefinition,p=r.pageRef,u=r.customId,s=r.optionalIndex;return new Promise((function(t,r){o.default.has(a,"componentType")||r(new Error("componentDefinition must contain componentType"));var f=e.components.buildDefaultComponentStructure(a.componentType);o.default.merge(f,a),t((0,i.runInContext)(n.appDefinitionId,e,(function(){return e.components.add(p,f,u,s)})))}))},addAndAdjustLayout:function(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.componentDefinition,p=r.pageRef,u=r.customId,s=r.optionalIndex;return new Promise((function(t,r){o.default.has(a,"componentType")||r(new Error("componentDefinition must contain componentType"));var f=e.components.buildDefaultComponentStructure(a.componentType);o.default.merge(f,a);var c=(0,i.runInContext)(n.appDefinitionId,e,(function(){return e.components.addAndAdjustLayout(p,f,u,s)}));e.waitForChangesApplied((function(){return t(c)}))}))},remove:function(e,n,t,o){var r=o.componentRef;e.viewMode.get()===e.viewMode.VIEW_MODES.MOBILE?(0,i.runInContext)(n.appDefinitionId,e,(function(){return e.mobile.hiddenComponents.hide(r)})):(0,i.runInContext)(n.appDefinitionId,e,(function(){return e.components.remove(r)}))},get:function(e,n,t,i){var a=i.componentRefs,p=i.properties,u=void 0===p?[]:p,s=i.applicationId,f=o.default.compact(o.default.isArray(a)?a:[a]);return o.default.transform(f,(function(t,i){var a={componentRef:i},p=!u.includes("components"),f=e.components.serialize(i,null,p);if(o.default.assign(a,o.default.pick(f,u)),o.default.includes(u,"sdkType")&&(a.sdkType=e.wixCode.getCompSdkType(i)),o.default.includes(u,"connections")&&(a.connections=e.platform.controllers.connections.get(i)),o.default.includes(u,"style")&&(a.style=e.components.style.get(i)),o.default.includes(u,"role")){var c=e.platform.controllers.connections.get(i),d=(0,r.resolveOption)(n,{applicationId:s},"applicationId",{isRequired:!0}),l=o.default.find(c,(function(n){return o.default.get(e.components.data.get(n.controllerRef),"applicationId")===d}));a.role=o.default.get(l,"role")}t.push(a)}),[])},serialize:function(e,n,t,o){var i=o.componentRef,r=o.maintainIdentifiers,a=void 0!==r&&r;return e.components.serialize(i,null,!1,a)},migrate:function(e,n,t,o){var i=o.componentRef,r=o.componentDefinition;return e.components.migrate(i,r)},getAllComponents:function(e){return e.components.getAllComponents()},getPage:function(e,n,t,o){var i=o.componentRef;return e.components.getPage(i)},getById:function(e,n,t,o){var i=o.id;return e.components.get.byId(i)},getChildren:function(e,n,t,o){var i=o.componentRef,r=o.recursive,a=void 0!==r&&r,p=o.fromDocument;return(void 0!==p&&p?e.components.getChildrenFromFull:e.components.getChildren)(i,a)},getAncestors:function(e,n,t,o){var i=o.componentRef;return e.components.getAncestors(i)},getType:function(e,n,t,o){var i=o.componentRef;return e.components.getType(i)},isFullWidth:function(e,n,t,o){var i=o.componentRef;if(!i)throw new Error("options must include componentRef property");return e.components.is.fullWidth(i)},setFullWidth:function(e,n,t,o){var i=o.componentRef,r=o.fullWidth,a=o.margins;if(!i)throw new Error("options must include componentRef property");if("boolean"!=typeof r)throw new Error("options must include fullWidth boolean property");return new Promise((function(n){if(r){var t=a||{},o=t.left,p=t.right,u={left:Object.assign({vw:0},o),right:Object.assign({vw:0},p)};e.components.layout.setDock(i,u)}else e.components.layout.unDock(i);e.waitForChangesApplied(n)}))},behaviors:{getRuntimeState:function(e,n,t,o){var i=o.componentRef;return e.components.behaviors.getRuntimeState(i)},execute:function(e,n,t,o){var r=o.componentRef,a=o.behaviorName,p=o.behaviorParams;return(0,i.runInContext)(n.appDefinitionId,e,(function(){return e.components.behaviors.execute(r,a,p)})),(0,i.promiseApplied)(e)},get:function(e,n,t,o){var i=o.componentRef;return e.components.behaviors.get(i)},update:function(e,n,t,o){var i=o.componentRef,r=o.behavior;return e.components.behaviors.update(i,r)},remove:function(e,n,t,o){var i=o.componentRef,r=o.behaviorName,a=o.actionName;return e.components.behaviors.remove(i,r,a)}},properties:{get:function(e,n,t,o){var i=o.componentRef;return e.components.properties.get(i)},update:function(e,n,t,o){var r=o.componentRef,a=o.props;(0,i.runInContext)(n.appDefinitionId,e,(function(){return e.components.properties.update(r,a)}))}},data:{get:function(e,n,t,o){var i=o.componentRef;return e.components.data.get(i)},update:function(e,n,t,o){var r=o.componentRef,a=o.data;(0,i.runInContext)(n.appDefinitionId,e,(function(){return e.components.data.update(r,a)}))},updateInLanguage:function(e,n,t,o){var r=o.componentRef,a=o.data,p=o.languageCode;(0,i.runInContext)(n.appDefinitionId,e,(function(){return e.components.data.updateInLang(r,a,p)}))}},layout:{get:function(e,n,t,o){var i=o.componentRef;return e.components.layout.get(i)},update:function(e,n,t,o){var r=o.componentRef,a=o.layout;(0,i.runInContext)(n.appDefinitionId,e,(function(){return e.components.layout.update(r,a)}))}},style:{get:function(e,n,t,o){var i=o.componentRef;return e.components.style.get(i)},update:function(e,n,t,o){var r=o.componentRef,a=o.style;(0,i.runInContext)(n.appDefinitionId,e,(function(){return e.components.style.setCustom(r,null,a)}))},updateFull:function(e,n,t,o){var r=o.componentRef,a=o.style;(0,i.runInContext)(n.appDefinitionId,e,(function(){return e.components.style.update(r,a)}))}},stylable:{update:function(e,n,t,o){var r=o.componentRef,a=o.style;(0,i.runInContext)(n.appDefinitionId,e,(function(){return e.components.stylable.update(r,a)}))}},design:{get:function(e,n,t,o){var i=o.componentRef;return e.components.design.get(i)},update:function(e,n,t,o){var r=o.componentRef,a=o.designItem,p=o.retainCharas;(0,i.runInContext)(n.appDefinitionId,e,(function(){return e.components.design.update(r,a,p)}))}},modes:{showComponentOnlyOnPagesGroup:function(e,n,t,o){var r=o.componentPointer,a=o.componentRef,p=void 0===a?r:a,u=o.pagesGroupPointer;(0,i.runInContext)(n.appDefinitionId,e,(function(){return e.components.modes.showComponentOnlyOnPagesGroup(p,u)}))},activateComponentMode:function(e,n,t,o){var r=o.componentRef,a=o.modeId;(0,i.runInContext)(n.appDefinitionId,e,(function(){return e.components.modes.activateComponentMode(r,a)}))},applyCurrentToAllModes:function(e,n,t,o){var r=o.componentRef;(0,i.runInContext)(n.appDefinitionId,e,(function(){return e.components.modes.applyCurrentToAllModes(r)}))},getModes:function(e,n,t,o){var i=o.componentRef;return e.components.modes.getModes(i)}},arrangement:{moveToIndex:function(e,n,t,o){var r=o.componentRef,a=o.index;return(0,i.runInContext)(n.appDefinitionId,e,(function(){return e.components.arrangement.moveToIndex(r,a)}))},getIndex:function(e,n,t,o){var i=o.componentRef;if(!i)throw new Error("options must include componentRef property");return e.components.arrangement.getCompIndex(i)}},refComponents:a.default}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=t(2),r=(o=i)&&o.__esModule?o:{default:o},a=t(0),p=t(1);n.default={removeAllOverrides:function(e,n,t,o){var i=o.componentRef;return new Promise((function(t,o){if("wysiwyg.viewer.components.RefComponent"===e.components.getType(i))if((0,a.isOperationAllowedInContext)(n,e.components.data.get(i).appDefinitionId)){try{(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.components.refComponents.removeAllOverrides(i)}))}catch(e){o(e)}t()}else o("The component with id '"+i.id+"' doesn't belong to this app.");else o("This method remove overrides only for a refComponent.")}))},openReferredComponent:function(e,n,t,o){var i=o.componentRef;return new Promise((function(t,o){if("wysiwyg.viewer.components.RefComponent"===e.components.getType(i))if((0,a.isOperationAllowedInContext)(n,e.components.data.get(i).appDefinitionId)){try{(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.components.refComponents.openReferredComponent(i)}))}catch(e){o(e)}t()}else o("The component with id '"+i.id+"' doesn't belong to this app.");else o("This method only opens a refComponent.")}))},closeWidgetToReferredComponent:function(e,n,t,o){var i=o.componentRef;return new Promise((function(t,o){if("platform.components.AppWidget"===e.components.getType(i))if((0,a.isOperationAllowedInContext)(n,e.components.data.get(i).appDefinitionId))try{t((0,a.runInContext)(n.appDefinitionId,e,(function(){return e.components.refComponents.closeWidgetToReferredComponent(i)})))}catch(e){o(e)}else o("The component with id '"+i.id+"' doesn't belong to this app.");else o("This method closes only appWidget")}))},getAllAppRefComponents:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o.appDefinitionId,r=e.components.getAllComponentsFromFull(),a=(0,p.resolveOption)(n,{appDefinitionId:i},"appDefinitionId",{isRequired:!0});return r.filter((function(n){var t=e.components.data.get(n)||{};return"WidgetRef"===t.type&&t.appDefinitionId===a}))},isRefComponentCollapsed:function(e,n,t,o){var i=o.componentRef;return"COLLAPSED"===r.default.get(e.components.properties.get(i),"ghost")},getCollapsedRefComponents:function(e,n,t,o){var i=o.componentRef;return new Promise((function(t,o){if("wysiwyg.viewer.components.RefComponent"===e.components.getType(i))if((0,a.isOperationAllowedInContext)(n,e.components.data.get(i).appDefinitionId))try{var p=e.components.refComponents.getAllGhostRefComponentsPrimaryConnection(i);t(r.default.map(p,(function(n,t){return{componentRef:e.components.get.byId(t),role:n.role}})))}catch(e){o(e)}else o("The component with id '"+i.id+"' doesn't belong to this app.");else o("This method get collapsed components only for a refComponent.")}))},collapseReferredComponent:function(e,n,t,o){var i=o.componentRef;return new Promise((function(t,o){if(!e.components.refComponents.isReferredComponent(i))return o("The component with id '"+i.id+"' isn't a referred component.");var r=e.components.refComponents.getRefHostCompPointer(i);if(!(0,a.isOperationAllowedInContext)(n,e.components.data.get(r).appDefinitionId))return o("The component with id '"+i.id+"' doesn't belong to this app.");try{(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.components.remove(i)}))}catch(e){return o(e)}t()}))},getTemplateComponent:function(e,n,t,o){var i=o.componentRef;return e.components.refComponents.getTemplateCompPointer(i)},expandReferredComponent:function(e,n,t,o){var i=o.componentRef;return new Promise((function(t,o){if(!e.components.refComponents.isReferredComponent(i))return o("The component with id '"+i.id+"' isn't a referred component.");var r=e.components.refComponents.getRefHostCompPointer(i);if(!(0,a.isOperationAllowedInContext)(n,e.components.data.get(r).appDefinitionId))return o("The component with id '"+i.id+"' doesn't belong to this app.");try{(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.components.refComponents.unGhostifyComponent(i)}))}catch(e){return o(e)}t()}))}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=t(2),r=(o=i)&&o.__esModule?o:{default:o},a=t(0),p=t(1);var u={SITE_HEADER:!0,SITE_FOOTER:!0};var s=function(e,n){return(0,r.default)(n).thru(e.components.getAncestors).reverse().tail().map("id").head()};function f(e,n,t,o){var i=n.appDefinitionId,r=t?t.id:null;return e.components.getAllComponents(r,(function(n){var t=e.components.getType(n);return function(e){return"platform.components.AppController"===e||"platform.components.AppWidget"===e}(t)&&e.components.data.get(n).applicationId===i||o&&e.tpa.isTpaByCompType(t)&&e.components.data.get(n).appDefinitionId===i}))}function c(e,n,t,o){var i=f(e,n,t,o),a=(0,r.default)(i).map(e.components.refComponents.getTemplateCompPointer).compact().keyBy("id").value();return(0,r.default)(i).reject((function(e){var n=e.id;return a[n]})).map((function(e){return{controllerRef:e}})).value()}function d(e,n,t,o){var i=o.controllerRef;return e.platform.controllers.connections.getControllerConnections(i)}n.default={listControllers:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o.pageRef,r=void 0===i?e.pages.getFocusedPage():i,a=o.appDefinitionId,u=o.includeTPAWidget,s={appDefinitionId:(0,p.resolveOption)(n,{appDefinitionId:a},"appDefinitionId",{isRequired:!0})};return c(e,s,r,u)},listAllControllers:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o.appDefinitionId,r=o.includeTPAWidget,a={appDefinitionId:(0,p.resolveOption)(n,{appDefinitionId:i},"appDefinitionId",{isRequired:!0})};return c(e,a,null,r)},listConnectableControllers:function(e,n,t,o){var i=o.componentRef,a=o.appDefinitionId,c=o.includeTPAWidget,d=e.components.getPage(i),l={appDefinitionId:(0,p.resolveOption)(n,{appDefinitionId:a},"appDefinitionId",{isRequired:!0})},g=f(e,l,d,c),m=s(e,i);return(0,r.default)(g).filter((function(n){return function(e,n,t,o){var i=e.components.getPage(o);if("masterPage"===i.id){var r=s(e,o);return!(r&&!u[r])||t===r}return n===i.id}(e,r.default.get(d,"id"),m,n)})).filter((function(n){return function(e,n,t){return"platform.components.AppWidget"!==e.components.getType(t)||e.components.isDescendantOfComp(n,t)}(e,i,n)})).map((function(e){return{controllerRef:e}})).value()},getControllerConnections:d,listControllerConnections:d,listConnections:function(e,n,t,o){var i=o.componentRef,a=e.platform.controllers.connections.get(i);return r.default.reject(a,{type:"WixCodeConnectionItem"})},listConnectedComponents:function(e,n,t,o){var i=o.controllerRef;return e.platform.controllers.connections.getConnectedComponents(i)},connect:function(e,n,t,o){var i=o.connectToRef,r=o.controllerRef,p=o.role,u=o.connectionConfig,s=o.isPrimary;return(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.platform.controllers.connections.connect(i,r,p,u,s)})),{connectToRef:i,controllerRef:r,role:p}},disconnect:function(e,n,t,o){var i=o.connectToRef,r=o.controllerRef,p=o.role;return(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.platform.controllers.connections.disconnect(i,r,p)}))},getData:function(e,n,t,o){var i=o.controllerRef,a=e.tpa.isTpaByCompType(e.components.getType(i)),p=e.components.data.get(i);if(a)return function(e,n){var t=n.controllerRef,o=n.compData,i={};e.tpa.data.getPublicData(o.applicationId,t,(function(e){if(e.error)throw new Error(e.error);i=e}));var r=e.platform.controllers.getName(t);return{type:o.widgetId,config:i.COMPONENT,displayName:r}}(e,{controllerRef:i,compData:p});var u=e.platform.controllers.settings.get(i);return{type:r.default.get(p,"controllerType"),config:u,displayName:e.platform.controllers.getName(i)}},saveConfiguration:function(e,n,t,o){var i=o.controllerRef,r=o.config,p=e.components.getType(i);return e.tpa.isTpaByCompType(p)?new Promise((function(t,o){return(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.tpa.data.setMultiple(i,r,"COMPONENT",(function(e){return e.error?o(new Error(e.error.message)):t(e)}))}))})):(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.platform.controllers.settings.set(i,r)}))},setDisplayName:function(e,n,t,o){var i=o.controllerRef,r=o.name;return(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.platform.controllers.setName(i,r)}))},setState:function(e,n,t,o){var i=o.state;return(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.platform.controllers.setState(i)}))},setExternalId:function(e,n,t,o){var i=o.controllerRef,r=o.externalId;return(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.platform.controllers.settings.setExternalId(i,r)}))},getExternalId:function(e,n,t,o){var i=o.controllerRef;return e.platform.controllers.settings.getExternalId(i)}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={getFontsOptions:function(e){return e.fonts.getFontsOptions()}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={add:function(e,n,t,o){var i=o.label;return new Promise((function(n){return e.waitForChangesApplied((function(){e.history.add(i),n()}))}))}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=t(2),r=(o=i)&&o.__esModule?o:{default:o},a=t(1);n.default={getSiteId:function(e){return e.generalInfo.getSiteId()},getMetaSiteId:function(e){return e.generalInfo.getMetaSiteId()},getPublicUrl:function(e){return e.generalInfo.getPublicUrl()},isSitePublished:function(e){return e.generalInfo.isSitePublished()},getLanguage:function(e){return e.generalInfo.getLanguage()},getRegionalLanguage:function(e){return e.generalInfo.getRegionalLanguage()},isSiteSaved:function(e){return!e.generalInfo.isFirstSave()&&!e.generalInfo.isDraft()},isHttpsEnabled:function(e){return e.generalInfo.isHttpsEnabled()},getAppInstance:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o.applicationId,r=(0,a.resolveOption)(n,{applicationId:i},"applicationId",{isRequired:!0}),p="wix-code"===n.appDefinitionId?e.wixCode.getClientSpec().applicationId:r;return e.tpa.app.getData(p).instance},getAppInstanceId:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o.applicationId,r=(0,a.resolveOption)(n,{applicationId:i},"applicationId",{isRequired:!0}),p="wix-code"===n.appDefinitionId?e.wixCode.getClientSpec().applicationId:r;return e.tpa.app.getData(p).instanceId},getCurrency:function(e){return e.generalInfo.getCurrency()},getTimeZone:function(e){return e.generalInfo.getTimeZone()},getUserId:function(e){return e.generalInfo.getUserInfo().userId},getUserInfo:function(e){return e.generalInfo.getUserInfo()},getVendorProductId:function(e,n,t,o){var i=r.default.get(o,"appDefinitionId");if(!i&&(0,a.isExtensionContext)(n))throw new Error("options must contain appDefinitionId");var p=i?e.platform.getAppDataByAppDefId(i):e.platform.getAppDataByApplicationId(n.applicationId);return r.default.get(p,"vendorProductId")},getRegion:function(e){return e.generalInfo.getLocale()},getArtifactsUrls:function(e,n,t){return e.generalInfo.getArtifactsUrl(t)},getSiteDisplayName:function(e){return e.siteDisplayName.get()},getStageViewMode:function(e){return e.documentMode.getComponentViewMode()},getSiteMap:function(e){return e.tpa.getSiteMap()}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t(0);n.default={add:function(e,n,t,i){var r=i.languageCode;return(0,o.runInContext)(n.appDefinitionId,e,(function(){return e.language.add(r)})),(0,o.promiseApplied)(e)},current:{set:function(e,n,t,i){var r=i.languageCode;return(0,o.runInContext)(n.appDefinitionId,e,(function(){return e.language.current.set(r)}))}},component:{getTranslations:function(e,n,t,o){var i=o.componentRef;return e.language.component.getTranslations(i)}},original:{get:function(e){return e.language.original.get()}},getTranslationLanguages:function(e){return e.language.getFull()},multilingual:{isEnabled:function(e){return e.language.multilingual.isEnabled()}}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=t(2),r=(o=i)&&o.__esModule?o:{default:o},a=t(0),p=t(1);var u=["MEMBERS_SUB_MENU","MEMBERS_LOGIN_MENU","MEMBERS_LOGIN_ICONS_MENU","CUSTOM_MAIN_MENU","CUSTOM_MENU"];n.default={create:function(e,n,t,o){var i=o.menuData,u=o.customId,s=o.applicationId,f=(0,p.resolveOption)(n,{applicationId:s},"applicationId",{isRequired:!0}),c=r.default.assign({appId:f},i);return(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.menu.create(c,u)}))},connect:function(e,n,t,o){var i=o.menuCompPointer,r=o.menuId;(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.menu.connect(i,r)}))},update:function(e,n,t,o){var i=o.menuId,r=o.menuData;(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.menu.update(i,r)}))},remove:function(e,n,t,o){var i=o.menuId;(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.menu.remove(i)}))},addItem:function(e,n,t,o){var i=o.menuId,r=o.menuItem;(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.menu.addItem(i,r)}))},getById:function(e,n,t,o){var i=o.menuId;return e.menu.getById(i)},getDefaultMenuId:function(e,n){var t,o=this;return(0,a.runInContext)(n.appDefinitionId,e,(t=regeneratorRuntime.mark((function n(){var t,i,r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.menu.getAll();case 2:if(t=n.sent,0!==(i=t.filter((function(e){return!u.includes(e.id)}))).length){n.next=6;break}return n.abrupt("return",null);case 6:return r=i.find((function(e){return"MAIN_MENU"===e.menuType})),a=i[0],n.abrupt("return",(r||a).id);case 9:case"end":return n.stop()}}),n,o)})),function(){var e=t.apply(this,arguments);return new Promise((function(n,t){return function o(i,r){try{var a=e[i](r),p=a.value}catch(e){return void t(e)}if(!a.done)return Promise.resolve(p).then((function(e){o("next",e)}),(function(e){o("throw",e)}));n(p)}("next")}))}))}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t(4),i=t(17),r=t(0),a=t(1);function p(e,n,t,o){var i=o.pageRef;return e.pages.data.get(i.id)}n.default={navigateTo:o.navigateTo,setState:function(e,n,t,o){var i=o.state;(0,r.runInContext)(n.appDefinitionId,e,(function(){return e.platform.pages.setState(i)}))},getCurrent:function(e){return e.pages.getReference(e.pages.getFocusedPageId())},getPrimary:function(e){return e.pages.getReference(e.pages.getPrimaryPageId())},getHomePage:function(e){var n=e.homePage.get();return e.components.get.byId(n)},add:function(e,n,t,i){var a=i.title,p=i.definition,u=i.shouldAddMenuItem,s=i.shouldNavigateToPage,f=void 0===s||s,c=(0,r.runInContext)(n.appDefinitionId,e,(function(){return e.pages.add(a,p,u)}));return f?(0,o.navigateTo)(e,n,t,{pageRef:c},c):c},getPageData:p,isDynamicPage:function(e,n,t,o){var i=o.pageRef,r=e.routers.getRouterRef.byPage(i);return Boolean(r)},rename:function(e,n,t,o){var i=o.pageRef,a=o.title;return(0,r.runInContext)(n.appDefinitionId,e,(function(){return e.pages.data.update(i.id,{title:a})}))},data:{get:p,getAll:function(e){return e.pages.getPagesData()},update:function(e,n,t,o){var i=o.pageRef,a=o.data;(0,r.runInContext)(n.appDefinitionId,e,(function(){return e.pages.data.update(i.id,a)}))}},pageUriSEO:{convertPageNameToUrl:function(e,n,t,o){var i=o.title;return e.pages.data.pageUriSEO.convertPageNameToUrl(i)}},serialize:function(e,n,t,o){var i=o.pageRef,r=o.maintainIdentifiers,a=void 0!==r&&r;return e.pages.serialize(i.id,a)},permissions:{hasPassword:function(e,n,t,o){var i=o.pageRef;return e.pages.permissions.hasPassword(i.id)},updatePagePassword:function(e,n,t,o){var i=o.pageRef,a=o.plainPassword;(0,r.runInContext)(n.appDefinitionId,e,(function(){return e.pages.permissions.updatePassword(i.id,a)}))},removePagePassword:function(e,n,t,o){var i=o.pageRef;(0,r.runInContext)(n.appDefinitionId,e,(function(){return e.pages.permissions.removePassword(i.id)}))},duplicatePagePassword:function(e,n,t,o){var i=o.destinationPageRef,a=o.sourcePageRef;return new Promise((function(t,o){(0,r.runInContext)(n.appDefinitionId,e,(function(){return e.pages.permissions.duplicatePagePassword(i.id,a.id,t,o)}))}))},duplicateGroupsPermissions:function(){return new Promise((function(e){e()}))}},remove:function(e,n,t,o){var i=o.pageRef;return new Promise((function(t,o){var a=e.pages.data.get(i.id);if(a)if((0,r.isOperationAllowedInContext)(n,a.managingAppDefId))if(e.pages.getCurrentPage().id!==i.id){var p=e.homePage.get();if(i.id!==p)if(a.tpaApplicationId)o("It is not allowed to delete a section page '("+i.id+")'");else{try{(0,r.runInContext)(n.appDefinitionId,e,(function(){return e.pages.remove(i.id)}))}catch(e){return void o(e)}t()}else o("It is not allowed to delete homePage ("+i.id+"), please set a new page as homePage and try again")}else o("It is not allowed to delete current page ("+i.id+"), please navigate to another page");else o("page with id '"+i.id+"' can not be deleted. page is not managed by this application");else o("page with id '"+i.id+"' doesn't exist")}))},getApplicationPages:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o.appDefinitionId,r=(0,a.resolveOption)(n,{appDefinitionId:i},"appDefinitionId",{isRequired:!1});return r?e.pages.getPagesData().filter((function(e){return e.managingAppDefId===r})):[]},popupPages:{add:i.addPopup,addConnected:i.addConnectedPopup,open:i.open,close:i.close,isPopupOpened:i.isPopupOpened,getApplicationPopups:i.getApplicationPopups}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getApplicationPopups=n.isPopupOpened=n.close=n.open=n.addConnectedPopup=n.addPopup=void 0;var o,i=t(4),r=t(2),a=(o=r)&&o.__esModule?o:{default:o},p=t(0),u=t(1);n.addPopup=function(e,n,t,o){var r=o.title,a=o.definition,u=o.shouldNavigateToPage,s=void 0===u||u,f=(0,p.runInContext)(n.appDefinitionId,e,(function(){return e.pages.popupPages.add(r,a)}));return s?(0,i.navigateTo)(e,n,t,{pageRef:f},f):f},n.addConnectedPopup=function(e,n,t,o){var r=o.title,s=o.definition,f=o.controllerType,c=o.popupRole,d=o.shouldNavigateToPage,l=void 0===d||d,g=o.appDefinitionId;return new Promise((function(o){(0,p.runInContext)(n.appDefinitionId,e,(function(){var p=e.pages.popupPages.add(r,s),d=(0,u.resolveOption)(n,{appDefinitionId:g},"appDefinitionId",{isRequired:!0}),m=a.default.defaultsDeep({data:{controllerType:f,name:f,applicationId:d}},e.components.buildDefaultComponentStructure("platform.components.AppController")),I=e.components.add(p,m);e.waitForChangesApplied((function(){var r=e.components.getChildren(p);e.platform.controllers.connections.connect(r[0],I,c,{},!0),o(l?(0,i.navigateTo)(e,n,t,{pageRef:p},p):p)}))}))}))},n.open=function(e,n,t,o){var i=o.popupRef,r=a.default.get(i,"id");r&&(0,p.runInContext)(n.appDefinitionId,e,(function(){return e.pages.popupPages.open(r)}))},n.close=function(e,n){(0,p.runInContext)(n.appDefinitionId,e,(function(){return e.pages.popupPages.close()}))},n.isPopupOpened=function(e){return e.pages.popupPages.isPopupOpened()},n.getApplicationPopups=function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o.appDefinitionId,r=(0,u.resolveOption)(n,{appDefinitionId:i},"appDefinitionId",{isRequired:!1});return r?e.pages.popupPages.getDataList().filter((function(e){return e.managingAppDefId===r})):[]}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t(0),i=t(1);n.default={create:function(e,n,t,r){var a=r.groupName,p=r.applicationId,u=(0,i.resolveOption)(n,{applicationId:p},"applicationId",{isRequired:!0}),s=(0,o.runInContext)(n.appDefinitionId,e,(function(){return e.pagesGroup.create({groupName:a,appId:u})}));return Promise.resolve(s)},addPageToPagesGroup:function(e,n,t,i){var r=i.pagesGroupPointer,a=i.pageId;(0,o.runInContext)(n.appDefinitionId,e,(function(){return e.pagesGroup.addPageToPagesGroup(r,a)}))},getById:function(e,n,t,o){var i=o.pagesGroupId;return e.pagesGroup.getById(i)},getByGroupName:function(e,n,t,o){var i=o.groupName;return e.pagesGroup.getByGroupName(i)},getAll:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=o.applicationId,a=(0,i.resolveOption)(n,{applicationId:r},"applicationId",{isRequired:!0});return e.pagesGroup.getAll(a)},remove:function(e,n,t,i){var r=i.pagesGroupPointer;(0,o.runInContext)(n.appDefinitionId,e,(function(){return e.pagesGroup.remove(r)}))}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=t(2),r=(o=i)&&o.__esModule?o:{default:o},a=t(0),p=t(1);function u(e,n,t,o){var i=o.routerRef,p=e.routers.get.byRef(i);if(p&&(0,a.isOperationAllowedInContext)(n,p.appDefinitionId))return{id:p.id,prefix:p.prefix,config:p.config,pages:(0,r.default)(p.pages).invertBy().map((function(n,t){return{pageRef:e.pages.getReference(t),pageRoles:n}})).value()}}function s(e,n,t,o){var i=o.prefix,r=e.routers.getRouterRef.byPrefix(i);if(!r)return r;var p=e.routers.get.byRef(r);return p&&(0,a.isOperationAllowedInContext)(n,p.appDefinitionId)?r:void 0}n.default={add:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o.prefix,r=o.config,u=o.group,s=o.appDefinitionId;return new Promise((function(t){var o={appDefinitionId:(0,p.resolveOption)(n,{appDefinitionId:s},"appDefinitionId",{isRequired:!0}),prefix:i,config:r};u&&(o.group=u),t((0,a.runInContext)(n.appDefinitionId,e,(function(){return e.routers.add(o)})))}))},remove:function(e,n,t,o){var i=o.routerRef,r=e.routers.get.byRef(i);r&&(0,a.isOperationAllowedInContext)(n,r.appDefinitionId)&&(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.routers.remove(i)}))},get:u,getAll:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o.appDefinitionId,a=(0,p.resolveOption)(n,{appDefinitionId:i},"appDefinitionId",{isRequired:!0});return r.default.map(e.routers.get.byApp(a),(function(o){var i=o.prefix,r=s(e,n,t,{prefix:i});return u(e,n,0,{routerRef:r})}))},update:function(e,n,t,o){var i=o.routerRef,r=o.prefix,p=o.config;return new Promise((function(t,o){var u=e.routers.get.byRef(i);u&&(0,a.isOperationAllowedInContext)(n,u.appDefinitionId)?((0,a.runInContext)(n.appDefinitionId,e,(function(){return e.routers.update(i,{prefix:r,config:p})})),t()):o()}))},getByPage:function(e,n,t,o){var i=o.pageRef,r=e.routers.getRouterRef.byPage(i);if(!r)return r;var p=e.routers.get.byRef(r);return p&&(0,a.isOperationAllowedInContext)(n,p.appDefinitionId)?r:void 0},getByPrefix:s,isValidPrefix:function(e,n,t,o){var i=o.prefix,r=o.applicationId,a=(0,p.resolveOption)(n,{applicationId:r},"applicationId",{isRequired:!0});return e.routers.isValidPrefix(a,i)},getCurrentDynamicRouting:function(e){var n=e.routers.getCurrentInnerRoute();if(n.isDynamic){var t=e.routers.get.byId(n.routerId);return n.prefix=t.prefix,n}return null},pages:{add:function(e,n,t,o){var i=o.routerRef,r=o.pageTitle,p=o.pageRoles;return new Promise((function(t){var o=e.routers.get.byRef(i);o&&(0,a.isOperationAllowedInContext)(n,o.appDefinitionId)||t(),t((0,a.runInContext)(n.appDefinitionId,e,(function(){return e.routers.pages.add(i,r,p)})))}))},delete:function(e,n,t,o){var i=o.routerRef,r=o.pageRef;return new Promise((function(t,o){var p=e.routers.get.byRef(i);p&&(0,a.isOperationAllowedInContext)(n,p.appDefinitionId)?((0,a.runInContext)(n.appDefinitionId,e,(function(){return e.pages.remove(r.id)})),t()):o()}))},connect:function(e,n,t,o){var i=o.routerRef,r=o.pageRef,p=o.pageRoles,u=e.routers.get.byRef(i);u&&(0,a.isOperationAllowedInContext)(n,u.appDefinitionId)&&(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.routers.pages.connect(i,r,p)}))},disconnect:function(e,n,t,o){var i=o.routerRef,r=o.pageRef,p=e.routers.get.byRef(i);p&&(0,a.isOperationAllowedInContext)(n,p.appDefinitionId)&&(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.routers.pages.disconnect(i,r)}))},move:function(e,n,t,o){var i=o.fromRouterRef,r=o.toRouterRef,p=o.pageRef,u=e.routers.get.byRef(i),s=e.routers.get.byRef(r);u&&s&&(0,a.isOperationAllowedInContext)(n,s.appDefinitionId)&&(0,a.isOperationAllowedInContext)(n,u.appDefinitionId)&&(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.routers.pages.move(p,i,r)}))},listConnectablePages:function(e){return e.routers.pages.listConnectablePages()}}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={getFooter:function(e){return e.siteSegments.getFooter()},getHeader:function(e){return e.siteSegments.getHeader()},getPagesContainer:function(e){return e.siteSegments.getPagesContainer()},getSiteStructure:function(e){return e.siteSegments.getSiteStructure()}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={getCustomNoPermissionsPageId:function(e){return e.siteMembers.getCustomNoPermissionsPageId()},setCustomNoPermissionsPageId:function(e,n,t,o){return e.siteMembers.setCustomNoPermissionsPageId(o)}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={styles:{getAll:function(e){return e.theme.styles.getAll()}},colors:{getAll:function(e){return e.theme.colors.getAll()}},fonts:{getMap:function(e){return e.theme.fonts.getMap()}}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=t(2),r=(o=i)&&o.__esModule?o:{default:o},a=t(0),p=t(1);function u(e,n,t,o){return new Promise((function(t,i){var p=r.default.clone(o);r.default.get(o,"appDefinitionId")?e.tpa.app.isInstalled(o.appDefinitionId)?i(new Error("Application already installed.")):e.tpa.appMarket.getDataAsync(o.appDefinitionId).then((function(u){u&&!u.error?"Wix"===u.by?(p.callback=function(a){if(a.onError)i(new Error(a.onError));else if(n=e.tpa.app.getDataByAppDefId(o.appDefinitionId),a.page){var p=e.pages.data.get(a.page.id);t({instanceId:r.default.get(n,"instanceId"),pageRef:a.page,pageUriSEO:r.default.get(p,"pageUriSEO"),title:r.default.get(p,"title")})}else t({instanceId:r.default.get(n,"instanceId")})},(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.tpa.app.add(o.appDefinitionId,p)}))):i(new Error("Can't add a non Wix application")):i(new Error("Application with "+o.appDefinitionId+" appDefinitionId do not exist."))})):i(new Error("options must contain appDefinitionId"))}))}var s=function(e,n){return function(t){t.error?n(new Error(t.error.message)):e(t)}};n.default={isAppSectionInstalled:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o.sectionId,a=o.appDefinitionId;return new Promise((function(t,o){if(i){var u=n.applicationId;if(!(0,p.isExtensionContext)(n)||a){if(a){var s=e.tpa.app.getDataByAppDefId(a);u=r.default.get(s,"applicationId")}t(e.tpa.section.isSectionInstalledByTpaPageId(u,i))}else o(new Error("options must contain appDefinitionId"))}else o(new Error("options must contain sectionId"))}))},isApplicationInstalled:function(e,n,t){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o.appDefinitionId;return new Promise((function(n,t){i?n(e.tpa.app.isInstalled(i)):t(new Error("options must contain appDefinitionId"))}))},setStyleParams:function(e,n,t,o){return new Promise((function(t,i){if(o&&o.compRef)if(o&&o.styleParams&&r.default.isArray(o.styleParams)){var p=(e.components.data.get(o.compRef)||{}).appDefinitionId;p?(0,a.isOperationAllowedInContext)(n,p)?(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.tpa.style.setStyleParam(o.compRef.id,o.styleParams,(function(){return t()}))})):i("It is not allowed to set style params for other applications, application "+n.appDefinitionId+" cannot set applications "+p+" components style params"):i("could not find component data for the given component ref")}else i("options must include styleParams property and styleParams must be an array");else i("options must include compRef property")}))},getStyleParams:function(e,n,t,o){return new Promise((function(t,i){if(o&&o.compRef){var r=(e.components.data.get(o.compRef)||{}).appDefinitionId;if(r)if((0,a.isOperationAllowedInContext)(n,r))t((e.tpa.style.get(o.compRef.id)||{}).style);else i("It is not allowed to get the style params from other applications, application "+n.appDefinitionId+" cannot get applications "+r+" components style params");else i("could not find component data for the given component ref")}else i("options must include compRef property")}))},getSiteTextPresets:function(e,n,t,o){if(!o||!o.compRef)throw new Error("options must include compRef property");return e.tpa.style.get(o.compRef.id).siteTextPresets},getSiteColors:function(e,n,t,o){if(!o||!o.compRef)throw new Error("options must include compRef property");return e.tpa.style.get(o.compRef.id).siteColors},data:{getAll:function(e,n,t,o){return new Promise((function(n,t){if(o&&o.compRef){var i=(e.components.data.get(o.compRef,null,!0)||{}).applicationId;void 0!==i?e.tpa.data.getPublicData(i,o.compRef,s(n,t)):t(new Error("could not find component data for the given component ref"))}else t(new Error("options must include compRef property"))}))},set:function(e,n,t,o){return new Promise((function(t,i){if(o&&o.compRef)if(o.key){var r=(e.components.data.get(o.compRef)||{}).appDefinitionId;r?(0,a.isOperationAllowedInContext)(n,r)?(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.tpa.data.set(o.compRef,o.key,o.value,o.scope||"COMPONENT",s(t,i))})):i(new Error("it is not allowed to set the public data from other applications, application "+n.appDefinitionId+" cannot set applications "+r+" public data")):i(new Error("could not find component data for the given component ref"))}else i(new Error("options must include key property"));else i(new Error("options must include compRef property"))}))},remove:function(e,n,t,o){return new Promise((function(t,i){if(o&&o.compRef)if(o.key){var r=(e.components.data.get(o.compRef)||{}).appDefinitionId;r?(0,a.isOperationAllowedInContext)(n,r)?(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.tpa.data.remove(o.compRef,o.key,o.scope||"COMPONENT",s(t,i))})):i(new Error("it is not allowed to remove the public data from other applications, application "+n.appDefinitionId+" cannot remove applications "+r+" public data")):i(new Error("could not find component data for the given component ref"))}else i(new Error("options must include key property"));else i(new Error("options must include compRef property"))}))}},add:{application:u,component:function(e,n,t,o){return new Promise((function(t,i){var u=r.default.clone(o);if(r.default.get(o,"componentType")){if(!o.appDefinitionId){if((0,p.isExtensionContext)(n))return void i(new Error("options must contain appDefinitionId"));u.appDefinitionId=n.appDefinitionId}if("WIDGET"===o.componentType){if(!r.default.isObject(o.widget))return void i(new Error("options must contain a widget object"));u.widget.tpaWidgetId=o.widget.widgetId}else if("PAGE"===o.componentType){if(!r.default.isObject(o.page))return void i(new Error("options must contain a page object"));if(o.page.isHidden&&!r.default.isBoolean(o.page.isHidden))return void i(new Error("isHidden param should be of type boolean"))}u.callback=function(n){if(n.onError)i(new Error(n.onError));else if("WIDGET"===o.componentType)t({compId:n.comp.id});else{var a=e.pages.data.get(n.page.id);t({compId:n.sectionId,pageRef:n.page,pageUriSEO:r.default.get(a,"pageUriSEO"),title:r.default.get(a,"title")})}},(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.tpa.comp.add(u)}))}else i(new Error("options must contain componentType"))}))}},app:{getDataByAppDefId:function(e,n,t,o){return e.tpa.app.getDataByAppDefId(o)},getAllCompsByApplicationId:function(e,n,t,o){return e.tpa.app.getAllCompsByApplicationId(o)},refreshApp:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t.applicationId,i=(0,p.resolveOption)(n,{applicationId:o},"applicationId",{isRequired:!0}),r=e.tpa.app.getAllCompsByApplicationId(i);return(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.tpa.app.refreshApp(r)}))},delete:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t.applicationId;return new Promise((function(t){var i=(0,p.resolveOption)(n,{applicationId:o},"applicationId",{isRequired:!0});(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.tpa.app.delete(i)})),e.waitForChangesApplied(t)}))},add:u}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o,i=t(2),r=(o=i)&&o.__esModule?o:{default:o},a=t(0);function p(e){return{name:e.name,fullPath:e.location,isDirectory:e.directory}}n.default={listChildren:function(e,n,t,o){var i=e.wixCode.fileSystem,a=i.getVirtualDescriptor(o.path,!0);return i.getChildren(a).then((function(e){return r.default.map(e,p)}))},readFile:function(e,n,t,o){var i=e.wixCode.fileSystem,r=i.getVirtualDescriptor(o.path,!1);return i.readFile(r)},writeFile:function(e,n,t,o){var i=e.wixCode.fileSystem,r=i.getVirtualDescriptor(o.path,!1);return(0,a.runInContext)(n.appDefinitionId,e,(function(){return i.writeFile(r,o.content)}))},deleteFile:function(e,n,t,o){var i=e.wixCode.fileSystem,r=i.getVirtualDescriptor(o.path,!1);return(0,a.runInContext)(n.appDefinitionId,e,(function(){return i.deleteItem(r)}))},flush:function(e,n){return(0,a.runInContext)(n.appDefinitionId,e,(function(){return e.wixCode.fileSystem.flush()}))},getViewerInfo:function(e){return e.wixCode.fileSystem.getViewerInfo()}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t(0);n.default={hiddenComponents:{show:function(e,n,t,i){var r=i.componentRef,a=e.pages.getFocusedPageId();(0,o.runInContext)(n.appDefinitionId,e,(function(){return e.mobile.hiddenComponents.show(r.id,a)}))}}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const o=t(0);n.default={get:function(e,n,t,{componentRef:o}){return e.responsiveLayout.get(o)},update:function(e,n,t,{componentRef:i,responsiveLayout:r}){o.runInContext(n.appDefinitionId,e,()=>e.responsiveLayout.update(i,r))}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t(0);n.default={getSkipToContent:function(e){return e.accessibility.skipToContent.get()},setSkipToContent:function(e,n,t,i){return(0,o.runInContext)(n.appDefinitionId,e,(function(){return e.accessibility.skipToContent.set(i)}))},getVisualFocus:function(e){return e.accessibility.visualFocus.get()},setVisualFocus:function(e,n,t,i){return(0,o.runInContext)(n.appDefinitionId,e,(function(){return e.accessibility.visualFocus.set(i)}))},getAutoDomReorder:function(e){return e.accessibility.autoDomReorder.get()},setAutoDomReorder:function(e,n,t,i){return(0,o.runInContext)(n.appDefinitionId,e,(function(){return e.accessibility.autoDomReorder.set(i)}))}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={isCoBranded:function(e){return e.account.isCoBranded()}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t(3);n.default={registerToErrorThrownForContext:function(e,n){var t=o.REGISTER_ERROR+n.appDefinitionId;e.platform.requestAPIFromWorker(t).then((function(t){var o=t.callback;return e.registerToErrorThrownForContext(n.appDefinitionId,o)}))},unRegisterToErrorThrownForContext:function(e,n){var t=o.REGISTER_ERROR+n.appDefinitionId;e.platform.requestAPIFromWorker(t).then((function(t){var o=t.callback;return e.unRegisterToErrorThrownForContext(n.appDefinitionId,o)}))}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={migrate:{convertAppPage:function(e,n,t,o){var i=o.pageRef;return e.wixapps.migrate.convertAppPage(i)}}}},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={screen:{getScreenResolution:function(e){return e.env.screen.getResolution()}}}}])}));
//# sourceMappingURL=platform-api.min.js.map